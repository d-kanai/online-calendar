# ğŸ¯ CLAUDE.md

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Claude Code (claude.ai/code) ãŒã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã‚³ãƒ¼ãƒ‰ã‚’æ‰±ã†éš›ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚’æä¾›ã—ã¾ã™ ğŸ¤–âœ¨

# ğŸš€ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

## ğŸª BDDé§†å‹•é–‹ç™ºã¨Figma Makeé€£æºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’Gherkinä»•æ§˜ã§å®šç¾©ã—ã€Figma Makeã‚’æ´»ç”¨ã—ã¦UIã‚’ä½œæˆã€Next.jsã«çµ±åˆã™ã‚‹é–‹ç™ºæ‰‹æ³•ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ ğŸŒŸ

### ğŸ¬ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®4æ®µéš

**1. ğŸ“ ã‚¬ãƒ¼ã‚­ãƒ³ã§ä»•æ§˜ã‚’è¡¨ç¾**
- ğŸ“‚ ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’Gherkinæ§‹æ–‡ã§`features/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨˜è¿°
- ğŸ¯ `Feature` â†’ `Rule` â†’ `Scenario`ã®éšå±¤ã§æ•´ç†
- ğŸ’¼ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®ã¿ã‚’è¨˜è¼‰ã—ã€UIã®è©³ç´°ã¯å«ã‚ãªã„
- ğŸ” å®Ÿè£…å‰ã«ä»•æ§˜ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã—ã¦ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚’ç¢ºèª

**2. ğŸ¨ Figma Makeã«Gherkinã‚’å…¥åŠ›ã—ã¦UIã‚’ä½œæˆ**
- ğŸ“‹ ä½œæˆã—ãŸGherkinä»•æ§˜ã‚’Figma Makeã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã—ã¦å…¥åŠ›
- ğŸ’¬ ã€Œã“ã®Gherkinä»•æ§˜ã«åŸºã¥ã„ã¦UIã‚’ä½œæˆã—ã¦ãã ã•ã„ã€ã¨ã—ã¦ä¾é ¼
- ğŸ¤– Figma MakeãŒä»•æ§˜ã‚’ç†è§£ã—ã¦UIè¨­è¨ˆã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ
- âš™ï¸ å¿…è¦ã«å¿œã˜ã¦UIèª¿æ•´ã‚„è¿½åŠ è¦ä»¶ã‚’æŒ‡ç¤º

**3. ğŸ“¦ Figma Makeã§ä½œæˆã•ã‚ŒãŸCodeã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è¨­ç½®**
- ğŸ“¤ Figma Makeã®ã€ŒExport Codeã€æ©Ÿèƒ½ã§Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‡ºåŠ›
- ğŸ“ å‡ºåŠ›ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’`frontend/figma-make-code/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜
- ğŸ”— ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã¨ä¾å­˜é–¢ä¿‚ã‚’ç¢ºèª
- ğŸ§© UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢ã‚’æ¤œè¨¼

**4. âš¡ Figma Make Codeã‚’Next.jsã«çµ„ã¿è¾¼ã¿**
- ğŸ”„ `frontend/figma-make-code/`ã®ã‚³ãƒ¼ãƒ‰ã‚’Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ±åˆ
- ğŸ“ ã€ŒFigma Make Codeçµ±åˆãƒ«ãƒ¼ãƒ«ã€ã«å¾“ã£ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
  - ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ï¼ˆtypes â†’ src/typesã€ui â†’ src/lib/uiã€components â†’ src/componentsï¼‰
  - ğŸ”— importãƒ‘ã‚¹ä¿®æ­£ï¼ˆç›¸å¯¾ãƒ‘ã‚¹èª¿æ•´ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šå‰Šé™¤ï¼‰
  - âš›ï¸ Next.jså¯¾å¿œï¼ˆ'use client'è¿½åŠ ã€App Routerå½¢å¼å¤‰æ›ï¼‰
  - ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¿½åŠ ï¼‰
  - ğŸ¨ CSSè¨­å®šæ›´æ–°ï¼ˆshadcn/uiäº’æ›å¤‰æ•°è¿½åŠ ï¼‰

### âš ï¸ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œæ™‚ã®æ³¨æ„ç‚¹

**ğŸ“ ä»•æ§˜ä½œæˆãƒ•ã‚§ãƒ¼ã‚ºï¼š**
- ğŸ¯ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¨UIãƒ«ãƒ¼ãƒ«ã‚’æ˜ç¢ºã«åˆ†é›¢
- ğŸ’¡ å®Ÿè£…è©³ç´°ã§ã¯ãªãã€ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹
- ğŸ¤ ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã®åˆæ„å½¢æˆã‚’é‡è¦–

**ğŸ¨ UIä½œæˆãƒ•ã‚§ãƒ¼ã‚ºï¼š**
- ğŸ“‹ Gherkinä»•æ§˜ã‚’ãã®ã¾ã¾Figma Makeã«å…¥åŠ›
- âœ… ç”Ÿæˆã•ã‚ŒãŸUIãŒãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹æ¤œè¨¼
- ğŸ”§ å¿…è¦ã«å¿œã˜ã¦UIã®å¾®èª¿æ•´ã‚’ä¾é ¼

**âš™ï¸ ã‚³ãƒ¼ãƒ‰çµ±åˆãƒ•ã‚§ãƒ¼ã‚ºï¼š**
- ğŸ“ æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰è¦ç´„ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«æº–æ‹ 
- ğŸ›¡ï¸ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®Ÿè£…ç¢ºèª
- ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ãƒ“ãƒ«ãƒ‰ç¢ºèª

**ğŸ” å“è³ªä¿è¨¼ï¼š**
- âœ… å®Ÿè£…å¾Œã«Gherkinä»•æ§˜ã¨ã®æ•´åˆæ€§ã‚’ç¢ºèª
- ğŸ¯ UIãƒ«ãƒ¼ãƒ«ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®é©åˆ‡ãªåˆ†é›¢ã‚’ç¶­æŒ
- ğŸ”— çµ±åˆãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®å‹•ä½œã‚’æ¤œè¨¼

ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚Šã€ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã®æ˜ç¢ºåŒ–ã‹ã‚‰UIå®Ÿè£…ã¾ã§ä¸€è²«æ€§ã®ã‚ã‚‹é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿç¾ã§ãã‚‹ ğŸ‰

## ğŸ¯ ATDDé–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ï¼ˆå¿…é ˆï¼‰

**ã™ã¹ã¦ã®æ©Ÿèƒ½é–‹ç™ºã¯ATDDï¼ˆAcceptance Test-Driven Developmentï¼‰ã§å®Ÿæ–½ã™ã‚‹ã“ã¨** ğŸ”¥

### ğŸ“‹ é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹æ‰‹é †

**1. ğŸ“ å¯¾è±¡ã®ã‚·ãƒŠãƒªã‚ªã‚’ç¢ºèª**
- `e2e/features/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®Gherkinã‚·ãƒŠãƒªã‚ªã‚’ç¢ºèª
- å®Ÿè£…å¯¾è±¡ã® `@develop` ã‚¿ã‚°ä»˜ãã‚·ãƒŠãƒªã‚ªã‚’ç‰¹å®š
- ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç†è§£

**2. ğŸš¨ E2Eå®Ÿè¡Œï¼ˆRedæ®µéšï¼‰**
```bash
yarn e2e:develop
```
- ã¾ãšå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆRedæ®µéšï¼‰
- failã—ãŸstepã‚’è©³ç´°ã«ç¢ºèªãƒ»åˆ†æ

**3. ğŸ¨ Frontendå®Ÿè£…ï¼ˆGreenæ®µéšï¼‰**
- failã‚’ãƒ‘ã‚¹ã•ã›ã‚‹ãŸã‚ã«stepå®šç¾©ã‚’å®Ÿè£…
- å¿…è¦ã«å¿œã˜ã¦frontendã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ãƒ•ãƒƒã‚¯ã‚’å®Ÿè£…
- UIå‹•ä½œãƒ»çŠ¶æ…‹ç®¡ç†ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å®Ÿè£…

**4. ğŸ§ª Backend TDDé–‹å§‹ï¼ˆTestAå®Ÿè£…ï¼‰**
- backendé€£æºãŒã‚ã‚‹å ´åˆã¯TDDãƒ—ãƒ­ã‚»ã‚¹é–‹å§‹
- **TestA: API test**ã‚’ã¾ãšã¯å®Ÿè£…ãƒ»å®Ÿè¡Œã—ã¦failç¢ºèª

**5. ğŸ”´ Backend Testå®Ÿè¡Œï¼ˆRedç¢ºèªï¼‰**
```bash
yarn ut
```
- APIãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆRedæ®µéšï¼‰
- æœŸå¾…ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»æŒ¯ã‚‹èˆã„ã‚’ç¢ºèª

**6. âš¡ Backendå®Ÿè£…ï¼ˆGreenæ®µéšï¼‰**
- backend testã‚’passã™ã‚‹ã‚ˆã†ã«å®Ÿè£…
- Controllerãƒ»Applicationãƒ»Domainå±¤ã‚’é †æ¬¡å®Ÿè£…
- Exceptioné§†å‹•è¨­è¨ˆã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€

**7. ğŸ”§ TypeCheck & Fixï¼ˆå“è³ªä¿è¨¼æ®µéšï¼‰**
```bash
yarn typecheck
```
- Frontend/Backendå…¨ä½“ã®å‹å®‰å…¨æ€§ã‚’ç¢ºèª
- å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯å³åº§ã«ä¿®æ­£
- å‹å®‰å…¨ãªå®Ÿè£…ã§å›å¸°ãƒã‚°ã‚’äºˆé˜²

**8. ğŸ”„ çµ±åˆç¢ºèªï¼ˆRefactoræ®µéšï¼‰**
- å¯¾è±¡ã®ã‚·ãƒŠãƒªã‚ªãŒpassã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—
- **backend test** ã¨ **e2e test** ä¸¡æ–¹ãŒãƒ‘ã‚¹ã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã‚’é€²ã‚ã‚‹
- ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»è¨­è¨ˆåŸå‰‡ã‚’ç¢ºèªã—ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

### âš ï¸ ATDDå®Ÿæ–½æ™‚ã®æ³¨æ„ç‚¹

- **ğŸš« å®Ÿè£…ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ç¦æ­¢**: ãƒ†ã‚¹ãƒˆãªã—ã§ã®å®Ÿè£…ã¯çµ¶å¯¾ã«è¡Œã‚ãªã„
- **ğŸ¯ ä¸€ã¤ãšã¤é€²ã‚ã‚‹**: è¤‡æ•°ã‚·ãƒŠãƒªã‚ªã‚’ä¸¦è¡Œå®Ÿè£…ã—ãªã„
- **âœ… 3ã¤ãƒ‘ã‚¹å¿…é ˆ**: backend test + e2e test + typecheck ã®å…¨ã¦ãŒæˆåŠŸã™ã‚‹ã¾ã§å®Œäº†ã¨ã—ãªã„
- **ğŸ“Š ç¶™ç¶šç¢ºèª**: å®Ÿè£…ä¸­ã‚‚å®šæœŸçš„ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã—ã¦çŠ¶æ…‹ç¢ºèª
- **ğŸ”§ å‹å®‰å…¨å„ªå…ˆ**: TypeCheckã‚¨ãƒ©ãƒ¼ã¯ä»–ã®ä½œæ¥­ã‚ˆã‚Šå„ªå…ˆã—ã¦ä¿®æ­£
- **ğŸ›¡ï¸ ValidationäºŒé‡ãƒã‚§ãƒƒã‚¯**: Frontend + Backendä¸¡æ–¹ã§validationå®Ÿè£…å¿…é ˆ

ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã‚Šã€å“è³ªã®é«˜ã„æ©Ÿèƒ½ã‚’ç¢ºå®Ÿã«å®Ÿè£…ã—ã€å›å¸°ãƒã‚°ã‚’é˜²æ­¢ã§ãã‚‹ ğŸ›¡ï¸

## âš¡ åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

### ğŸ–¥ï¸ Backendé–‹ç™º
```bash
# ğŸš€ é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œï¼‰- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
yarn back:dev

# ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆä¸€å›ã®ã¿ï¼‰
yarn workspace online-calendar-backend test:run

# ğŸ”„ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼‰
yarn workspace online-calendar-backend test

# ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰
yarn workspace online-calendar-backend build

# ğŸš€ æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
yarn back:start
```

### ğŸ¨ Frontendé–‹ç™º
```bash
# ğŸš€ é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
yarn front:dev

# ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰
yarn front:build

# ğŸš€ æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
yarn front:start

# ğŸ” Lintå®Ÿè¡Œ
yarn front:lint

# ğŸ”§ å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
yarn front:typecheck
```

### ğŸ›¡ï¸ å…¨ä½“å“è³ªãƒã‚§ãƒƒã‚¯
```bash
# ğŸ”§ Frontend + Backend çµ±åˆå‹ãƒã‚§ãƒƒã‚¯
yarn typecheck

# ğŸ”§ Backend ã®ã¿å‹ãƒã‚§ãƒƒã‚¯
yarn back:typecheck

# ğŸ”§ Frontend ã®ã¿å‹ãƒã‚§ãƒƒã‚¯
yarn front:typecheck
```

## ğŸŒ¿ Gité‹ç”¨ãƒ«ãƒ¼ãƒ«

- ğŸ’¬ Commitã‚³ãƒ¡ãƒ³ãƒˆã¯æ—¥æœ¬èªã§ç®‡æ¡æ›¸ãã‚¹ã‚¿ã‚¤ãƒ«ã§è¨˜è¿°ã™ã‚‹ã“ã¨
- ğŸ¤” å¤‰æ›´ã®ç†ç”±ï¼ˆwhyï¼‰ã‚’ã§ãã‚‹é™ã‚Šå«ã‚ã‚‹ã“ã¨
- ğŸš€ git pushã¯è‡ªå‹•å®Ÿè¡Œï¼ˆç¢ºèªãªã—ï¼‰ã§è¡Œã†ã“ã¨

## ğŸ¨ Figma Make Codeçµ±åˆãƒ«ãƒ¼ãƒ«

### ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
Figma Make Codeã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ±åˆã™ã‚‹éš›ã¯ä»¥ä¸‹ã®æ§‹é€ ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼š

```
frontend/src/
â”œâ”€â”€ types/              # ğŸ“ å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆmeeting.tsç­‰ï¼‰
â”œâ”€â”€ lib/ui/            # ğŸ§© UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆshadcn/uiäº’æ›ï¼‰
â”œâ”€â”€ components/        # âš›ï¸ æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆCalendarViewç­‰ï¼‰
â””â”€â”€ app/
    â”œâ”€â”€ globals.css    # ğŸ¨ Tailwindè¨­å®šã¨CSSå¤‰æ•°
    â””â”€â”€ page.tsx       # ğŸ“„ ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
```

### ğŸ”§ çµ±åˆæ‰‹é †

#### 1. ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
- ğŸ“ å‹å®šç¾©: `figma-make-code/types/` â†’ `src/types/`
- ğŸ§© UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª: `figma-make-code/components/ui/` â†’ `src/lib/ui/`
- âš›ï¸ æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: `figma-make-code/components/` â†’ `src/components/`
- ğŸ“„ ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª: `App.tsx` â†’ `src/app/page.tsx`

#### 2. ğŸ”— importãƒ‘ã‚¹ä¿®æ­£
- ğŸ“‚ `./ui/` â†’ `../lib/ui/`
- ğŸ“‚ `../types/` â†’ `../types/`
- âŒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šå‰Šé™¤: `@radix-ui/react-dialog@1.1.6` â†’ `@radix-ui/react-dialog`

#### 3. âš›ï¸ Next.jså¯¾å¿œ
- ğŸ“ `'use client';`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–è¿½åŠ ï¼ˆClient Componentã®å ´åˆï¼‰
- ğŸ”„ App Routerå½¢å¼ã¸ã®å¤‰æ›
- ğŸ–¥ï¸ React Server Componentså¯¾å¿œ

#### 4. ğŸ“¦ ä¾å­˜é–¢ä¿‚ç®¡ç†
å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:
```bash
# ğŸ”§ åŸºæœ¬ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
npm install lucide-react sonner

# âš›ï¸ Radix UIåŸºç›¤
npm install @radix-ui/react-slot class-variance-authority clsx tailwind-merge

# ğŸ§© å¿…è¦ãªRadix UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
npm install @radix-ui/react-dialog @radix-ui/react-switch @radix-ui/react-label @radix-ui/react-separator
```

#### 5. ğŸ¨ Tailwind CSSè¨­å®š
`globals.css`ã«shadcn/uiäº’æ›ã®CSSå¤‰æ•°ã‚’è¿½åŠ :
- ğŸŒˆ ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆå¤‰æ•°ï¼ˆprimary, secondary, mutedç­‰ï¼‰
- ğŸŒ™ ãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒå¯¾å¿œ
- âš¡ Tailwind CSS v4ã®@themeæ§‹æ–‡ä½¿ç”¨

#### 6. ğŸ¤– è‡ªå‹•ä¿®æ­£ã‚³ãƒãƒ³ãƒ‰
```bash
# âŒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šå‰Šé™¤
find src/lib/ui -name "*.tsx" -exec sed -i '' 's/@[0-9][^"]*//g' {} \;
```

### ğŸ§ª æ¤œè¨¼æ‰‹é †
1. ğŸš€ `npm run dev`ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª
2. ğŸ”§ ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ã®è§£æ±º
3. ğŸ¨ CSSã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨ç¢ºèª
4. âœ… å…¨æ©Ÿèƒ½ã®å‹•ä½œãƒ†ã‚¹ãƒˆ

### ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **ğŸ¨ CSSãŒå½“ãŸã‚‰ãªã„**: CSSå¤‰æ•°ã®ä¸è¶³ã€@themeæ§‹æ–‡ã‚¨ãƒ©ãƒ¼
- **ğŸ”— importæ–‡ã‚¨ãƒ©ãƒ¼**: ãƒ‘ã‚¹é–“é•ã„ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šæ®‹å­˜
- **ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼**: å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã“ã®æ‰‹é †ã«å¾“ã†ã“ã¨ã§ã€Figma Make Codeã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’åŠ¹ç‡çš„ã«Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ±åˆã§ãã‚‹ ğŸ‰

### ğŸš¨ Figma Make Codeä¿è­·ãƒ«ãƒ¼ãƒ«
- **ğŸš« çµ¶å¯¾å‰Šé™¤ç¦æ­¢**: `figma-make-code/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯çµ¶å¯¾ã«å‰Šé™¤ã—ã¦ã¯ãªã‚‰ãªã„
- **ğŸ”§ ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯é™¤å¤–**: TypeScriptè¨­å®šã§`figma-make-code`ã‚’é™¤å¤–å¯¾è±¡ã«è¿½åŠ 
- **ğŸ’¾ è¨­è¨ˆè³‡ç”£ä¿è­·**: Figma Makeã§ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯é‡è¦ãªè¨­è¨ˆè³‡ç”£ã¨ã—ã¦ä¿æŒ
- **ğŸ—ï¸ é–‹ç™ºå‚ç…§**: æ–°æ©Ÿèƒ½é–‹ç™ºæ™‚ã®å‚è€ƒã‚³ãƒ¼ãƒ‰ã¨ã—ã¦æ´»ç”¨
- **ğŸ“ TypeScriptè¨­å®šä¾‹**:
```json
{
  "exclude": ["node_modules", "figma-make-code"]
}
```

## ğŸ›¡ï¸ ValidationäºŒé‡å®Ÿè£…ãƒ«ãƒ¼ãƒ«

### ğŸ¯ åŸºæœ¬åŸå‰‡
- **âœ… Frontend/Backendä¸¡æ–¹å¿…é ˆ**: ã™ã¹ã¦ã®validationã¯Frontend + Backend ã®äºŒé‡å®Ÿè£…ãŒå¿…è¦
- **âš¡ Frontend**: UXå‘ä¸Šã®ãŸã‚ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- **ğŸ”’ Backend**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ãŸã‚ã®å …ç‰¢ãªæœ€çµ‚é˜²è¡›ç·š
- **ğŸš« ç‰‡æ–¹ã®ã¿ç¦æ­¢**: ã©ã¡ã‚‰ã‹ä¸€æ–¹ã ã‘ã®å®Ÿè£…ã¯çµ¶å¯¾ã«ç¦æ­¢

### ğŸ¨ Frontend Validationè²¬å‹™
- **ğŸ‘¤ UXæœ€é©åŒ–**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å³åº§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨ã‚¨ãƒ©ãƒ¼é˜²æ­¢
- **âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œè¨¼**: ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ä¸­ã®å³åº§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **ğŸ¯ UIçŠ¶æ…‹ç®¡ç†**: ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãƒ»éè¡¨ç¤ºã®åˆ¶å¾¡
- **ğŸ“± ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæœ€é©åŒ–**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡å‰Šæ¸›

#### Frontendå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
const validateForm = () => {
  const newErrors: string[] = [];
  
  // å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯
  if (!formData.title.trim()) {
    newErrors.push('ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆé …ç›®ã§ã™');
  }
  
  // å½¢å¼ãƒã‚§ãƒƒã‚¯
  if (!formData.startTime) {
    newErrors.push('é–‹å§‹æ™‚åˆ»ã¯å¿…é ˆé …ç›®ã§ã™');
  }
  
  // ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯
  if (formData.startTime && formData.endTime) {
    if (new Date(formData.endTime) <= new Date(formData.startTime)) {
      newErrors.push('çµ‚äº†æ™‚åˆ»ã¯é–‹å§‹æ™‚åˆ»ã‚ˆã‚Šå¾Œã«è¨­å®šã—ã¦ãã ã•ã„');
    }
  }
  
  setErrors(newErrors);
  return newErrors.length === 0;
};

const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();
  
  // âœ… Frontend validationå¿…é ˆå®Ÿè¡Œ
  if (!validateForm()) {
    return; // ã‚¨ãƒ©ãƒ¼æ™‚ã¯é€ä¿¡ã—ãªã„
  }
  
  try {
    await onSubmit(meetingData);
  } catch (error) {
    // Backend validationã‚¨ãƒ©ãƒ¼ã‚‚ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    setErrors([error.message]);
  }
};
```

### ğŸ”’ Backend Validationè²¬å‹™  
- **ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é˜²è¡›**: æ‚ªæ„ã‚ã‚‹å…¥åŠ›ã‹ã‚‰ã®æœ€çµ‚é˜²è­·
- **ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã®ç¢ºå®Ÿãªç¶­æŒ
- **ğŸ­ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«**: ãƒ“ã‚¸ãƒã‚¹ä¸å¤‰æ¡ä»¶ã®çµ¶å¯¾ä¿è¨¼
- **ğŸ”’ å …ç‰¢æ€§**: Frontendãƒã‚¤ãƒ‘ã‚¹æ”»æ’ƒã‹ã‚‰ã®ä¿è­·

#### Backend Domainå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
export const CreateMeetingDataSchema = z.object({
  title: z.string()
    .min(1, 'ä¼šè­°ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™')
    .max(100, 'ä¼šè­°ã‚¿ã‚¤ãƒˆãƒ«ã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .trim(),
  startTime: z.date({
    message: 'é–‹å§‹æ™‚åˆ»ã¯å¿…é ˆã§ã™'
  }).refine(
    (date) => !isNaN(date.getTime()),
    { message: 'é–‹å§‹æ™‚åˆ»ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“' }
  ),
  endTime: z.date({
    message: 'çµ‚äº†æ™‚åˆ»ã¯å¿…é ˆã§ã™'
  }).refine(
    (date) => !isNaN(date.getTime()),
    { message: 'çµ‚äº†æ™‚åˆ»ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“' }
  ),
  ownerId: z.string()
    .min(1, 'ã‚ªãƒ¼ãƒŠãƒ¼IDã¯å¿…é ˆã§ã™')
    .trim()
}).refine(
  (data) => data.startTime < data.endTime,
  {
    message: 'é–‹å§‹æ™‚åˆ»ã¯çµ‚äº†æ™‚åˆ»ã‚ˆã‚Šå‰ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™',
    path: ['startTime']
  }
).refine(
  (data) => {
    const duration = data.endTime.getTime() - data.startTime.getTime();
    return duration >= 15 * 60 * 1000; // 15åˆ†ä»¥ä¸Š
  },
  {
    message: 'ä¼šè­°ã¯15åˆ†ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™',
    path: ['endTime']
  }
);

export class Meeting {
  static create(data: CreateMeetingData): Meeting {
    try {
      // ğŸ”’ Domainå±¤ã§ã®å …ç‰¢validation
      const validatedData = CreateMeetingDataSchema.parse(data);
      return new Meeting(/* validated data */);
    } catch (error) {
      if (error instanceof ZodError) {
        const issues = error.issues;
        if (issues && issues.length > 0) {
          throw new Error(issues[0].message);
        }
        throw new Error('Validation failed');
      }
      throw error;
    }
  }
}
```

### âš–ï¸ è²¬å‹™åˆ†æ•£åŸå‰‡
- **Frontend**: ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–
- **Backend**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§é‡è¦–
- **ä¸¡æ–¹åŒæœŸ**: åŒã˜ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’ä¸¡æ–¹ã§å®Ÿè£…
- **Backendæœ€çµ‚**: æœ€çµ‚çš„ãªæ±ºå®šæ¨©ã¯Backend Domainå±¤

### ğŸš¨ é‡è¦ãªå®Ÿè£…ãƒ«ãƒ¼ãƒ«
- **ğŸ”„ ãƒ«ãƒ¼ãƒ«åŒæœŸ**: Frontend/Backendã§åŒã˜validationãƒ«ãƒ¼ãƒ«ã‚’ç¶­æŒ
- **ğŸ¯ Backendå³æ ¼**: Backendã¯å¸¸ã«Frontendã‚ˆã‚Šå³æ ¼ã«å®Ÿè£…
- **ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸çµ±ä¸€**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å¯èƒ½ãªé™ã‚Šçµ±ä¸€
- **ğŸ§ª ãƒ†ã‚¹ãƒˆå¿…é ˆ**: Frontend/Backendä¸¡æ–¹ã§validationãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…
- **ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®å¤‰æ›´æ™‚ã¯ä¸¡æ–¹ã‚’åŒæ™‚æ›´æ–°

## ğŸ¨ Frontend Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸ“ åŸºæœ¬æ§‹æˆ
Frontendã§ã¯ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ï¼š

```typescript
// Zodã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆbackendã¨åŒæœŸï¼‰
const MeetingFormSchema = z.object({
  title: z.string()
    .min(1, 'ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆé …ç›®ã§ã™')
    .trim(),
  startTime: z.string()
    .min(1, 'é–‹å§‹æ™‚åˆ»ã¯å¿…é ˆé …ç›®ã§ã™'),
  endTime: z.string()
    .min(1, 'çµ‚äº†æ™‚åˆ»ã¯å¿…é ˆé …ç›®ã§ã™'),
  isImportant: z.boolean().optional().default(false)
}).refine(
  (data) => {
    if (!data.startTime || !data.endTime) return true;
    const start = new Date(data.startTime);
    const end = new Date(data.endTime);
    return end > start;
  },
  {
    message: 'çµ‚äº†æ™‚åˆ»ã¯é–‹å§‹æ™‚åˆ»ã‚ˆã‚Šå¾Œã«è¨­å®šã—ã¦ãã ã•ã„',
    path: ['endTime']
  }
);

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
const validateForm = () => {
  const newErrors: string[] = [];
  
  try {
    // ğŸ”’ Zodã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    MeetingFormSchema.parse({
      title: formData.title,
      startTime: formData.startTime,
      endTime: formData.endTime,
      isImportant: formData.isImportant
    });
  } catch (error) {
    if (error instanceof z.ZodError) {
      error.issues.forEach(issue => {
        newErrors.push(issue.message);
      });
    }
  }
  
  // è¿½åŠ ã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆZodã§ã¯è¡¨ç¾å›°é›£ãªã‚‚ã®ï¼‰
  // æ™‚é–“é‡è¤‡ãƒã‚§ãƒƒã‚¯ã€é–‹å§‹æ¸ˆã¿ä¼šè­°ãƒã‚§ãƒƒã‚¯ç­‰
  
  setErrors(newErrors);
  return newErrors.length === 0;
};
```

### ğŸ¯ Frontend Zodãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç‰¹å¾´
- **ğŸ“Š ãƒ•ã‚©ãƒ¼ãƒ ç‰¹åŒ–**: HTML inputè¦ç´ ã¨ã®é€£æºã«æœ€é©åŒ–
- **âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›æ™‚ã®å³åº§ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- **ğŸ”— BackendåŒæœŸ**: åŸºæœ¬ãƒ«ãƒ¼ãƒ«ã¯Backend Zodã‚¹ã‚­ãƒ¼ãƒã¨çµ±ä¸€
- **ğŸ§© è¿½åŠ ãƒ«ãƒ¼ãƒ«**: Zodã§è¡¨ç¾å›°é›£ãªãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¯å€‹åˆ¥å®Ÿè£…

# ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å…±é€šè¨­è¨ˆ

### ğŸ¯ åŸºæœ¬åŸå‰‡
- **ğŸª Presentationå±¤**: ãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ã®ã¿å‡¦ç†
- **âš™ï¸ Applicationå±¤**: Exceptioné§†å‹•ã§ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¾
- **ğŸ”„ å…±é€šå‡¦ç†**: Honoã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§çµ±ä¸€ãƒ¬ã‚¹ãƒãƒ³ã‚¹

### ğŸ—ï¸ å®Ÿè£…æ§‹æˆ
```
shared/
â”œâ”€â”€ exceptions/
â”‚   â””â”€â”€ http-exceptions.ts    # HTTPExceptionåŸºåº•ã‚¯ãƒ©ã‚¹
â””â”€â”€ middleware/
    â””â”€â”€ error-handler.ts      # Honoã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
```

### ğŸ”„ ã‚¨ãƒ©ãƒ¼ãƒ•ãƒ­ãƒ¼
```
Application Layer â†’ throw HttpException
       â†“
Hono Error Handler â†’ catch HttpException
       â†“
Unified JSON Response â†’ { success: false, error: message }
```

### ğŸ“‹ å®Ÿè£…ä¾‹
```typescript
// Routeè¨­å®š
meetingRoutes.onError(errorHandler);

// Application Layer
if (!meeting) {
  throw new NotFoundException('Meeting not found');
}

// Error Handler
if (err instanceof HttpException) {
  return c.json({ success: false, error: err.message }, err.statusCode);
}
```

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒçµ±ä¸€ã•ã‚Œã€Controllerå±¤ãŒå¤§å¹…ã«ç°¡ç´ åŒ–ã•ã‚Œã‚‹ ğŸ¯

# ğŸ–¥ï¸ Backendã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ«ãƒ¼ãƒ«

## ğŸ—ï¸ DDD/Clean Architecture æ§‹é€ 

Backendãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®DDDï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼‰ã¨Clean Architectureã®åŸå‰‡ã«å¾“ã£ã¦æ§‹æˆã™ã‚‹ï¼š

```
backend/src/modules/{module}/
â”œâ”€â”€ presentation/          # ğŸ¯ ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â””â”€â”€ {module}.controller.ts
â”œâ”€â”€ application/          # âš™ï¸ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ queries/         # ğŸ“– ã‚¯ã‚¨ãƒªï¼ˆèª­ã¿å–ã‚Šæ“ä½œï¼‰
â”‚   â”‚   â”œâ”€â”€ get-all-{entities}.query.ts
â”‚   â”‚   â”œâ”€â”€ get-{entity}-by-id.query.ts
â”‚   â”‚   â””â”€â”€ get-{entities}-by-{criteria}.query.ts
â”‚   â””â”€â”€ commands/        # âœï¸ ã‚³ãƒãƒ³ãƒ‰ï¼ˆæ›¸ãè¾¼ã¿æ“ä½œï¼‰
â”‚       â”œâ”€â”€ create-{entity}.command.ts
â”‚       â”œâ”€â”€ update-{entity}.command.ts
â”‚       â””â”€â”€ delete-{entity}.command.ts
â”œâ”€â”€ domain/              # ğŸ­ ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â””â”€â”€ {entity}.model.ts
â””â”€â”€ infra/              # ğŸ­ ã‚¤ãƒ³ãƒ•ãƒ©å±¤
    â””â”€â”€ {entity}.repository.ts
```

## ğŸ¯ å±¤åˆ¥è²¬å‹™

### ğŸª Presentationå±¤ï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰
- **è²¬å‹™**: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†ã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢æˆ
- **ä¾å­˜**: Applicationå±¤ã®Query/Commandã®ã¿
- **ç‰¹å¾´**: 
  - Controllerã‚¯ãƒ©ã‚¹ã§æ§‹æˆ
  - å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«å¯¾å¿œã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤
  - ãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ã®ã¿å‡¦ç†ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯å…±é€šåŒ–ï¼‰
  - **ğŸ“¤ Outputå‹**: 1 APIã”ã¨ã«1ã¤ã®å°‚ç”¨Outputå‹ã‚’å®šç¾©
- **ğŸš« ç¦æ­¢äº‹é …**: 
  - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯validationã®å®Ÿè£…
  - ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
  - ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…

#### ğŸ“¤ API Outputå‹è¨­è¨ˆ
- **ğŸ¯ åŸå‰‡**: 1 APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ = 1 Outputå‹
- **ğŸ“ é…ç½®**: `presentation/output.ts`ã«ã™ã¹ã¦ã®Outputå‹ã‚’å®šç¾©
- **ğŸ—ï¸ æ§‹é€ **: 
  - `GetAllMeetingsOutput`: ä¸€è¦§å–å¾—APIç”¨
  - `GetMeetingByIdOutput`: å€‹åˆ¥å–å¾—APIç”¨
  - `CreateMeetingOutput`: ä½œæˆAPIç”¨
  - `UpdateMeetingOutput`: æ›´æ–°APIç”¨
  - å„APIã«å¯¾å¿œã™ã‚‹`to{ApiName}Output()`å¤‰æ›é–¢æ•°
- **âœ… ãƒ¡ãƒªãƒƒãƒˆ**: 
  - APIä»•æ§˜ã®æ˜ç¢ºåŒ–
  - å°†æ¥ã®APIå€‹åˆ¥æ‹¡å¼µãŒå®¹æ˜“
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®éš è”½ã‚’ä¿è¨¼

#### ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ
- **ğŸ¯ Controllerå±¤ã®è²¬å‹™**: ãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ã®ã¿å‡¦ç†
- **ğŸš« é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³**: Controllerå†…ã§ã®404/500ãƒã‚§ãƒƒã‚¯
- **âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³**: Applicationå±¤ã§ã®Exception throw
- **ğŸ”„ çµ±ä¸€å‡¦ç†**: Honoã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§çµ±ä¸€ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```typescript
// âŒ é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³
async getMeetingById(c: Context) {
  const meeting = await this.query.run(id);
  if (!meeting) {
    return c.json({ error: 'Not found' }, 404);
  }
  return c.json({ data: meeting });
}

// âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
async getMeetingById(c: Context) {
  const meeting = await this.query.run(id); // å†…éƒ¨ã§NotFoundException throw
  return c.json({ success: true, data: meeting });
}
```

### âš™ï¸ Applicationå±¤ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰
- **è²¬å‹™**: ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè¡Œã€å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®åˆ¶å¾¡
- **æ§‹æˆ**: Queryï¼ˆèª­ã¿å–ã‚Šï¼‰ã¨Commandï¼ˆæ›¸ãè¾¼ã¿ï¼‰ã§åˆ†é›¢
- **Query/Commandè¦ç´„**:
  - ğŸ”§ **å˜ä¸€ãƒ¡ã‚½ãƒƒãƒ‰**: å„ã‚¯ãƒ©ã‚¹ã¯`run()`ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿æŒã¤
  - ğŸ·ï¸ **å‘½åè¦ç´„**: ã‚¯ãƒ©ã‚¹åã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åã¨ã™ã‚‹
    - ä¾‹: `CreateMeetingCommand`, `GetAllMeetingsQuery`
  - âš¡ **å˜ä¸€è²¬ä»»**: 1ã¤ã®ã‚¯ã‚¨ãƒª/ã‚³ãƒãƒ³ãƒ‰ã¯1ã¤ã®å‡¦ç†ã®ã¿å®Ÿè¡Œ
- **ä¾å­˜**: Domainå±¤ã¨Infraå±¤ã®Repositoryã®ã¿

#### ğŸš¨ Applicationå±¤ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **ğŸ¯ Exceptioné§†å‹•**: é©åˆ‡ãªHTTPExceptionã‚’ç™ºç”Ÿã•ã›ã‚‹
- **ğŸš« nullè¿”å´ã®ç¦æ­¢**: Query/Commandã¯nullã‚’è¿”ã•ãªã„
- **âœ… æ˜ç¤ºçš„ã‚¨ãƒ©ãƒ¼**: ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ©ãƒ¼ã‚’å…·ä½“çš„ãªExceptionã§è¡¨ç¾

```typescript
// âŒ é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³
async run(id: string): Promise<Meeting | null> {
  const meeting = await this.repository.findById(id);
  return meeting; // nullã‚’è¿”å´
}

// âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
async run(id: string): Promise<Meeting> {
  const meeting = await this.repository.findById(id);
  if (!meeting) {
    throw new NotFoundException('Meeting not found');
  }
  return meeting;
}
```

#### ğŸ—ï¸ å…±é€šExceptionè¨­è¨ˆ
```typescript
// HTTPExceptionåŸºåº•ã‚¯ãƒ©ã‚¹
export class HttpException extends Error {
  public readonly statusCode: number;
  public readonly message: string;
}

// å…·ä½“çš„ãªException
export class BadRequestException extends HttpException {
  constructor(message: string = 'Bad request') {
    super(400, message);
  }
}

export class NotFoundException extends HttpException {
  constructor(message: string = 'Not found') {
    super(404, message);
  }
}
```

### ğŸ­ Domainå±¤ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰
- **è²¬å‹™**: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®å®šç¾©ã€ãƒ‡ãƒ¼ã‚¿validation
- **æ§‹æˆ**: 
  - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚¯ãƒ©ã‚¹å®šç¾©
  - ä½œæˆç”¨ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆ`CreateXxxData`ï¼‰
  - æ›´æ–°ç”¨ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆ`UpdateXxxData`ï¼‰
- **ä¾å­˜**: ä»–ã®å±¤ã«ä¾å­˜ã—ãªã„ï¼ˆæœ€ã‚‚å†…å´ã®å±¤ï¼‰

#### ğŸ­ Domain Modelè¨­è¨ˆåŸå‰‡
- **ğŸ”’ Private Constructor**: ç›´æ¥ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã‚’é˜²æ­¢ã—ã€é©åˆ‡ãªç”Ÿæˆæ–¹æ³•ã‚’å¼·åˆ¶
- **âœ… å®Œå…¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³**: `create`ãƒ¡ã‚½ãƒƒãƒ‰ã§å…¨validationã‚’å®Ÿè¡Œ
- **ğŸ—ï¸ Static Factory Methods**: æ„å›³çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã‚’ä¿ƒé€²
  - `Entity.create(data)`: æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ä½œæˆ
  - `Entity.fromPersistence(data)`: æ°¸ç¶šåŒ–ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®å¾©å…ƒ
- **ğŸ”„ State Transition Methods**: çŠ¶æ…‹å¤‰æ›´ã¯ãƒ“ã‚¸ãƒã‚¹çš„æŒ¯ã‚‹èˆã„ã®åå‰ã§å®Ÿè¡Œ
  - æŠ½è±¡çš„ãª`update`ã§ã¯ãªãå…·ä½“çš„ãªãƒ“ã‚¸ãƒã‚¹çš„æŒ¯ã‚‹èˆã„ã‚’å‘½å
  - `modifyDetails(data)`ç­‰ã€ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚’è¡¨ç¾ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰åã‚’ä½¿ç”¨
  - å€‹åˆ¥ã®updateãƒ¡ã‚½ãƒƒãƒ‰ã¯çŠ¶æ…‹é·ç§»ãƒ«ãƒ¼ãƒ«ã®æ··ä¹±ã‚’æ‹›ããŸã‚ç¦æ­¢
  - `updatedAt`ã¯æ›´æ–°æ™‚ã«è‡ªå‹•æ›´æ–°
- **ğŸš« æ°¸ç¶šåŒ–è©³ç´°ã®æ’é™¤**: Domainå±¤ã¯æ°¸ç¶šåŒ–ã®è©³ç´°ã‚’æŒãŸãªã„
  - `toPersistence`ç­‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯é…ç½®ã—ãªã„
  - Repositoryå±¤ã§Mappingå‡¦ç†ã‚’æ‹…å½“
```typescript
import { z, ZodError } from 'zod';

// ğŸ¯ Zodã‚¹ã‚­ãƒ¼ãƒå®šç¾©
export const CreateMeetingDataSchema = z.object({
  title: z.string()
    .min(1, 'ä¼šè­°ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™')
    .trim(),
  startTime: z.date({
    required_error: 'é–‹å§‹æ™‚åˆ»ã¯å¿…é ˆã§ã™',
    invalid_type_error: 'é–‹å§‹æ™‚åˆ»ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“'
  }),
  endTime: z.date({
    required_error: 'çµ‚äº†æ™‚åˆ»ã¯å¿…é ˆã§ã™', 
    invalid_type_error: 'çµ‚äº†æ™‚åˆ»ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“'
  }),
  isImportant: z.boolean().optional().default(false),
  ownerId: z.string()
    .min(1, 'ã‚ªãƒ¼ãƒŠãƒ¼IDã¯å¿…é ˆã§ã™')
    .trim()
}).refine(
  (data) => data.startTime < data.endTime,
  {
    message: 'é–‹å§‹æ™‚åˆ»ã¯çµ‚äº†æ™‚åˆ»ã‚ˆã‚Šå‰ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™',
    path: ['startTime']
  }
);

export type CreateMeetingData = z.infer<typeof CreateMeetingDataSchema>;

export class Meeting {
  private constructor(/* private fields */) {}

  static create(data: CreateMeetingData): Meeting {
    try {
      // ğŸ¯ Zodã«ã‚ˆã‚‹validationå®Ÿè¡Œ
      const validatedData = CreateMeetingDataSchema.parse(data);
      return new Meeting(/* validated data */);
    } catch (error) {
      if (error instanceof ZodError) {
        // ğŸ”„ çµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        const issues = error.issues || error.errors;
        if (issues && issues.length > 0) {
          throw new Error(issues[0].message);
        }
        throw new Error('Validation failed');
      }
      throw error;
    }
  }

  static fromPersistence(data: PersistenceData): Meeting {
    // æ°¸ç¶šåŒ–ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®å¾©å…ƒï¼ˆvalidationã‚¹ã‚­ãƒƒãƒ—ï¼‰
  }

  modifyDetails(data: UpdateMeetingData): void {
    // ä¼šè­°è©³ç´°ã®ä¿®æ­£ï¼ˆãƒ“ã‚¸ãƒã‚¹çš„æŒ¯ã‚‹èˆã„ï¼‰
  }

  // getterã®ã¿æä¾›ï¼ˆæ°¸ç¶šåŒ–è©³ç´°ã¯Repositoryå±¤ã§å‡¦ç†ï¼‰
  get id(): string { return this._id; }
  get title(): string { return this._title; }
  // ... ãã®ä»–ã®getterãƒ¡ã‚½ãƒƒãƒ‰
}

#### ğŸ¯ Backend Domain Validationè¨­è¨ˆåŸå‰‡
- **âš¡ Zodä½¿ç”¨å¿…é ˆ**: ã™ã¹ã¦ã®validationã¯Zodã‚¹ã‚­ãƒ¼ãƒã§å®Ÿè£…
- **ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æœ€å„ªå…ˆ**: æ‚ªæ„ã‚ã‚‹å…¥åŠ›ã‹ã‚‰ã®æœ€çµ‚é˜²è­·ãƒ©ã‚¤ãƒ³
- **ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ä¿è¨¼**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã®ç¢ºå®Ÿãªç¶­æŒ
- **ğŸ­ ãƒ“ã‚¸ãƒã‚¹ä¸å¤‰æ¡ä»¶**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«ã®çµ¶å¯¾çš„ä¿è¨¼
- **âœ… å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯**: `.min(1, 'ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸')`ã§ç©ºæ–‡å­—æ¤œè¨¼
- **ğŸ“… ãƒ‡ãƒ¼ã‚¿å½¢å¼ãƒã‚§ãƒƒã‚¯**: `.date()`, `.number()`ç­‰ã®å‹å®‰å…¨æ¤œè¨¼  
- **ğŸ¯ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«æ¤œè¨¼**: `.refine()`ã§ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰åˆ¶ç´„ã‚’å®Ÿè£…
- **ğŸš« Controllerå±¤ã§ã®é‡è¤‡å®Ÿè£…ç¦æ­¢**: validationè²¬å‹™ã¯Domainå±¤ã®ã¿
- **ğŸ’¬ å…·ä½“çš„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: æ—¥æœ¬èªã§ã‚ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼æ–‡è¨€
- **ğŸ”„ çµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ZodError â†’ Errorå¤‰æ›ã§ä¸€è²«æ€§ç¢ºä¿
- **ğŸ›¡ï¸ Frontendé€£æº**: Frontendã¨åŒã˜ãƒ«ãƒ¼ãƒ«ã‚’å …ç‰¢ã«å®Ÿè£…
- **ğŸ¯ Backendå³æ ¼ãƒ«ãƒ¼ãƒ«**: Frontendã‚ˆã‚Šå³æ ¼ãªåˆ¶ç´„ã§æœ€çµ‚ä¿è¨¼

### ğŸ­ Infraå±¤ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼‰
- **è²¬å‹™**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã€å¤–éƒ¨APIé€£æº
- **æ§‹æˆ**: Repositoryãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’æŠ½è±¡åŒ–
- **ç‰¹å¾´**:
  - Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç›´æ¥ä½¿ç”¨
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ã¨ã®å¤‰æ›ã‚’æ‹…å½“
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯åŸºæœ¬çš„ãªæˆåŠŸ/å¤±æ•—ã®ã¿

#### ğŸ—ƒï¸ Repositoryè¨­è¨ˆåŸå‰‡
- **ğŸ”„ Domain Modelå¤‰æ›**: æ°¸ç¶šåŒ–ãƒ‡ãƒ¼ã‚¿ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«é–“ã®å¤‰æ›
- **ğŸ“Š CRUDæ“ä½œ**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ã‚’å¼•æ•°ãƒ»æˆ»ã‚Šå€¤ã¨ã™ã‚‹
  - `create(entity)`: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’æ°¸ç¶šåŒ–
  - `save(entity)`: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ›´æ–°ã‚’æ°¸ç¶šåŒ–
  - `findById(id)`: IDã§ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å–å¾—
  - `findAll()`: å…¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å–å¾—
- **ğŸ—‚ï¸ Mappingè²¬å‹™**: Domain Modelã¨Persistence Dataé–“ã®ãƒãƒƒãƒ”ãƒ³ã‚°å‡¦ç†

```typescript
export class MeetingRepository {
  async create(meeting: Meeting): Promise<Meeting> {
    const data = this.toPersistence(meeting);
    const record = await prisma.meeting.create({ data });
    return Meeting.fromPersistence(record);
  }

  async save(meeting: Meeting): Promise<Meeting> {
    const data = this.toPersistence(meeting);
    const record = await prisma.meeting.update({
      where: { id: meeting.id },
      data
    });
    return Meeting.fromPersistence(record);
  }

  private toPersistence(meeting: Meeting): PersistenceData {
    return {
      id: meeting.id,
      title: meeting.title,
      startTime: meeting.startTime,
      endTime: meeting.endTime,
      isImportant: meeting.isImportant,
      ownerId: meeting.ownerId,
      createdAt: meeting.createdAt,
      updatedAt: meeting.updatedAt
    };
  }
}

## ğŸš« å»ƒæ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³

### âŒ Serviceå±¤ã®å»ƒæ­¢
- **ç†ç”±**: Query/Commandãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ˆã‚Šæ˜ç¢ºãªè²¬å‹™åˆ†é›¢ãŒå¯èƒ½
- **ä»£æ›¿**: Applicationãƒ¬ã‚¤ãƒ¤ãƒ¼ã®Query/Commandã‚¯ãƒ©ã‚¹
- **åˆ©ç‚¹**: 
  - å„å‡¦ç†ã®æ„å›³ãŒæ˜ç¢º
  - ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„å˜ä½
  - å¤‰æ›´å½±éŸ¿ç¯„å›²ã®é™å®š

## ğŸ“ å®Ÿè£…æŒ‡é‡

### ğŸ¯ ä¾å­˜é–¢ä¿‚ã®æ–¹å‘
```
Presentation â†’ Application â†’ Domain â† Infra
```
- å¤–å´ã®å±¤ã¯å†…å´ã®å±¤ã«ä¾å­˜å¯èƒ½
- å†…å´ã®å±¤ã¯å¤–å´ã®å±¤ã«ä¾å­˜ã—ã¦ã¯ãªã‚‰ãªã„
- Infraå±¤ã®ã¿Domainå±¤ã«ä¾å­˜ï¼ˆãƒ‡ãƒ¼ã‚¿å‹ä½¿ç”¨ã®ãŸã‚ï¼‰

### ğŸ·ï¸ å‘½åè¦ç´„
- **Query**: `Get{Entity}By{Criteria}Query` ã¾ãŸã¯ `GetAll{Entities}Query`
- **Command**: `{Action}{Entity}Command` (ä¾‹: `CreateMeetingCommand`)
- **Repository**: `{Entity}Repository`
- **Controller**: `{Entity}Controller`

### ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### ğŸ“– Queryï¼ˆèª­ã¿å–ã‚Šï¼‰ãƒ•ãƒ­ãƒ¼
```
Client â†’ Controller â†’ Query â†’ Repository â†’ Database
Database â†’ Repository â†’ Query â†’ Controller â†’ Client
```

#### âœï¸ Commandï¼ˆæ›¸ãè¾¼ã¿ï¼‰ãƒ•ãƒ­ãƒ¼
```
Client â†’ Controller â†’ Command â†’ Repository â†’ Database
Database â†’ Repository â†’ Command â†’ Controller â†’ Client
```

#### ğŸ”„ Update Commandè©³ç´°ãƒ•ãƒ­ãƒ¼
```
Client â†’ Controller â†’ UpdateCommand
       â†“
1. Repository.findById(id) â†’ Database
       â†“
2. DomainModel.update(data) â†’ State Transition
       â†“
3. Repository.save(model) â†’ Database
       â†“
Controller â†’ Client
```

ã“ã®æ§‹é€ ã«ã‚ˆã‚Šã€ä¿å®ˆæ€§ãƒ»ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ãƒ»æ‹¡å¼µæ€§ã®é«˜ã„Backendã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®Ÿç¾ã™ã‚‹ ğŸš€

## ğŸ·ï¸ Domain Modelå‘½åè¦ç´„

### ğŸ¯ ãƒ¡ã‚½ãƒƒãƒ‰å‘½ååŸå‰‡
- **âŒ æŠ½è±¡çš„ãªå‘½å**: `update()`, `change()`, `modify()` ç­‰ã®æ±ç”¨çš„ãªåå‰ã¯é¿ã‘ã‚‹
- **âœ… ãƒ“ã‚¸ãƒã‚¹çš„æŒ¯ã‚‹èˆã„**: ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚’è¡¨ç¾ã™ã‚‹å…·ä½“çš„ãªåå‰ã‚’ä½¿ç”¨
- **ğŸ­ ãƒ‰ãƒ¡ã‚¤ãƒ³è¡¨ç¾**: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæŒã¤å®Ÿéš›ã®ãƒ“ã‚¸ãƒã‚¹çš„æŒ¯ã‚‹èˆã„ã‚’å‘½åã«åæ˜ 

### ğŸ“ å‘½åä¾‹ï¼ˆMeeting ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰
```typescript
// âŒ æŠ½è±¡çš„ãªå‘½å
meeting.update(data);
meeting.change(data);
meeting.modify(data);

// âœ… ãƒ“ã‚¸ãƒã‚¹çš„æŒ¯ã‚‹èˆã„
meeting.modifyDetails(data);        // ä¼šè­°è©³ç´°ã®ä¿®æ­£
meeting.reschedule(startTime, endTime); // ä¼šè­°ã®å†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
meeting.rename(title);              // ä¼šè­°åã®å¤‰æ›´
meeting.markAsImportant();          // é‡è¦åº¦ã‚’è¨­å®š
meeting.markAsNormal();             // é‡è¦åº¦ã‚’è§£é™¤
meeting.cancel();                   // ä¼šè­°ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«
meeting.postpone(newDate);          // ä¼šè­°ã®å»¶æœŸ
```

### ğŸª ä»–ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å‘½åä¾‹
```typescript
// User ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
user.activate();              // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ‰åŠ¹åŒ–
user.deactivate();            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç„¡åŠ¹åŒ–
user.updateProfile(data);     // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°
user.changePassword(newPwd);  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´

// Order ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
order.confirm();              // æ³¨æ–‡ã®ç¢ºå®š
order.cancel();               // æ³¨æ–‡ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«
order.ship();                 // æ³¨æ–‡ã®ç™ºé€
order.complete();             // æ³¨æ–‡ã®å®Œäº†

// Product ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
product.updatePrice(price);   // ä¾¡æ ¼ã®æ›´æ–°
product.discontinue();        // è£½å“ã®å»ƒæ­¢
product.restock(quantity);    // åœ¨åº«ã®è£œå……
```

### ğŸ“ å‘½åã®æŒ‡é‡
- **ğŸ¯ æ„å›³ã®æ˜ç¢ºåŒ–**: ãƒ¡ã‚½ãƒƒãƒ‰åã‹ã‚‰ãƒ“ã‚¸ãƒã‚¹çš„ãªæ„å›³ãŒèª­ã¿å–ã‚Œã‚‹
- **ğŸ“– å¯èª­æ€§**: ã‚³ãƒ¼ãƒ‰ãŒãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’ãã®ã¾ã¾è¡¨ç¾ã™ã‚‹
- **ğŸ¤ å…±é€šè¨€èª**: é–‹ç™ºè€…ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãŒåŒã˜èªå½™ã‚’ä½¿ç”¨
- **ğŸ” ç™ºè¦‹ã—ã‚„ã™ã•**: æ©Ÿèƒ½ã‚’æ¢ã™éš›ã«ç›´æ„Ÿçš„ã«è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹

ã“ã®å‘½åè¦ç´„ã«ã‚ˆã‚Šã€ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ãŒã‚³ãƒ¼ãƒ‰ã«ç›´æ¥è¡¨ç¾ã•ã‚Œã€ä¿å®ˆæ€§ã¨ç†è§£ã—ã‚„ã™ã•ãŒå‘ä¸Šã™ã‚‹ ğŸ¯

## ğŸ“ å®Ÿè£…ãƒ«ãƒ¼ãƒ«

- ğŸ”¤ Featureãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯è‹±èªã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼ˆFeature, Scenario, Given, When, Then, And, Ruleï¼‰
- Featureãƒ•ã‚¡ã‚¤ãƒ«ã«UIã®ãƒ«ãƒ¼ãƒ«ã¯å«ã‚ãªã„ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®ã¿
- ğŸ‡¯ğŸ‡µ èª¬æ˜æ–‡ã‚„æ‰‹é †ã¯æ—¥æœ¬èªã§è¨˜è¿°ã™ã‚‹ã“ã¨

## ğŸ“š æ–‡æ›¸åŒ–ãƒ«ãƒ¼ãƒ«

- ğŸ‡¯ğŸ‡µ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯æ—¥æœ¬èªã§è¨˜è¿°ã™ã‚‹ã“ã¨

# ğŸ§ª Test Code

## ğŸ“‚ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ«ãƒ¼ãƒ«

- ğŸ“ **specã¯ã‚³ãƒ¼ãƒ‰ã®ãã°ã«ç½®ã**: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.spec.ts`ï¼‰ã¯å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã™ã‚‹
- ğŸ”— **é–¢é€£æ€§ã®å¯è¦–åŒ–**: ã‚³ãƒ¼ãƒ‰ã¨ãƒ†ã‚¹ãƒˆãŒåŒã˜å ´æ‰€ã«ã‚ã‚‹ã“ã¨ã§ä¿å®ˆæ€§ã¨ç™ºè¦‹ã—ã‚„ã™ã•ã‚’å‘ä¸Š

```
src/modules/meeting/controllers/
â”œâ”€â”€ meeting.controller.ts      # å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ meeting.controller.spec.ts # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆåŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
```

## ğŸ¯ TestA: Controller API ãƒ†ã‚¹ãƒˆ

### ğŸ“‹ ãƒ†ã‚¹ãƒˆæ–¹é‡
- **Controller 1 methodã«å¯¾ã—ã¦ã®spec**: å„Controllerãƒ¡ã‚½ãƒƒãƒ‰ã”ã¨ã«ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ
- **API in-out test**: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å…¥å‡ºåŠ›ãƒ†ã‚¹ãƒˆ
- **no mock**: ãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨ã›ãšã€å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã‚µãƒ¼ãƒ“ã‚¹å±¤ã‚’ä½¿ç”¨
- **use real database**: å®Ÿéš›ã®SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ãŸçµ±åˆãƒ†ã‚¹ãƒˆ

### ğŸ”„ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†
- **test caseã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã¯ç”¨æ„ã™ã‚‹**: å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å†…ã§ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
- **before each æ¯å›ãƒªã‚»ãƒƒãƒˆã™ã‚‹**: `beforeEach`ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒªã‚¢ã—ã¦ç‹¬ç«‹æ€§ã‚’ä¿è¨¼
- **ãƒ•ã‚¡ã‚¯ãƒˆãƒªä½¿ç”¨ãƒ«ãƒ¼ãƒ«**: ãƒ†ã‚¹ãƒˆã®æ„å›³ã«å¿œã˜ã¦ãƒ‡ãƒ¼ã‚¿ä½œæˆæ–¹æ³•ã‚’é¸æŠã™ã‚‹

```typescript
beforeEach(async () => {
  // ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«ã™ã‚‹
  await prisma.meeting.deleteMany();
});
```

#### ğŸ­ ãƒ•ã‚¡ã‚¯ãƒˆãƒªä½¿ç”¨æ–¹é‡
**ç‰¹å®šã®å€¤ãŒé‡è¦ãªå ´åˆ**: æ˜ç¤ºçš„ã«å€¤ã‚’æŒ‡å®šã—ã¦ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ
```typescript
// Given - é–‹å§‹æ™‚åˆ»ãŒé‡è¦ãªãƒ†ã‚¹ãƒˆ
await meetingFactory.create({
  startTime: new Date('2025-01-15T10:00:00Z'),
  endTime: new Date('2025-01-15T11:00:00Z')
});
```

**ä»¶æ•°ã‚„å­˜åœ¨ã ã‘ãŒé‡è¦ãªå ´åˆ**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨ã—ã¦ã‚·ãƒ³ãƒ—ãƒ«ã«
```typescript
// Given - ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ã®ã¿ãŒé‡è¦ï¼ˆå…¨ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼‰
await meetingFactory.create({});
await meetingFactory.create({});
```

### ğŸ“ ãƒ†ã‚¹ãƒˆæ§‹æˆä¾‹
```typescript
test('getAllMeetings - è¤‡æ•°ã®ä¼šè­°ãƒ‡ãƒ¼ã‚¿ãŒé–‹å§‹æ™‚åˆ»é †ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã¦å–å¾—ã§ãã‚‹', async () => {
  // Given - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™
  await prisma.meeting.create({
    data: {
      title: 'ãƒ†ã‚¹ãƒˆä¼šè­°1',
      startTime: new Date('2025-01-15T10:00:00Z'),
      endTime: new Date('2025-01-15T11:00:00Z'),
      isImportant: false,
      ownerId: 'user123'
    }
  });

  // When - å®Ÿè¡Œ
  const mockContext = createMockContext();
  const response = await meetingController.getAllMeetings(mockContext);

  // Then - æ¤œè¨¼
  expect(response.data.success).toBe(true);
  expect(response.data.data).toHaveLength(1);
});
```

## ğŸš€ ãƒ†ã‚¹ãƒˆå…±é€šãƒ«ãƒ¼ãƒ«

### ğŸ“ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å‘½åè¦ç´„
- **æ—¥æœ¬èªã§è¨˜è¿°**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åã¯æ—¥æœ¬èªã§è¨˜è¿°ã™ã‚‹ã“ã¨
- **æ„å›³ã¨WHYã‚’è¾¼ã‚ã‚‹**: ãƒ†ã‚¹ãƒˆã®ç›®çš„ã¨æ¤œè¨¼ã—ãŸã„ç†ç”±ã‚’æ˜ç¢ºã«ã™ã‚‹
- **å…·ä½“çš„ãªæœŸå¾…å‹•ä½œ**: ã©ã®ã‚ˆã†ãªçµæœã‚’æœŸå¾…ã™ã‚‹ã‹ã‚’å…·ä½“çš„ã«è¨˜è¿°

```typescript
// âŒ æ‚ªã„ä¾‹
test('getAllMeetings', async () => {

// âœ… è‰¯ã„ä¾‹  
test('getAllMeetings - è¤‡æ•°ã®ä¼šè­°ãƒ‡ãƒ¼ã‚¿ãŒé–‹å§‹æ™‚åˆ»é †ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã¦å–å¾—ã§ãã‚‹', async () => {
test('createMeeting - å¿…é ˆé …ç›®ãŒå…¨ã¦å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã«ä¼šè­°ãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹', async () => {
test('deleteMeeting - å­˜åœ¨ã—ãªã„IDã‚’æŒ‡å®šã—ãŸå ´åˆã«404ã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚Œã‚‹', async () => {
```

### ğŸ“– ã‚³ãƒ¡ãƒ³ãƒˆè¦ç´„
**å¿…é ˆ**: å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨

```typescript
test('ãƒ¡ã‚½ãƒƒãƒ‰å - æœŸå¾…ã™ã‚‹å‹•ä½œã®è©³ç´°èª¬æ˜', async () => {
  // Given - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ã€å‰ææ¡ä»¶ã®è¨­å®š
  
  // When - ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè¡Œ
  
  // Then - çµæœã®æ¤œè¨¼ã€æœŸå¾…å€¤ã¨ã®æ¯”è¼ƒ
});
```

### ğŸ¨ ã‚³ãƒ¡ãƒ³ãƒˆã®å½¹å‰²
- **`// Given`**: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€ãƒ¢ãƒƒã‚¯è¨­å®šã€å‰ææ¡ä»¶
- **`// When`**: ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®å®Ÿéš›ã®å®Ÿè¡Œ
- **`// Then`**: çµæœæ¤œè¨¼ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã€æœŸå¾…å€¤ãƒã‚§ãƒƒã‚¯

### ğŸ› ï¸ å®Ÿè£…æŒ‡é‡
- **å¯èª­æ€§**: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ä»•æ§˜æ›¸ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã‚ˆã†æ˜ç¢ºã«è¨˜è¿°
- **ç‹¬ç«‹æ€§**: å„ãƒ†ã‚¹ãƒˆã¯ä»–ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ãªã„ç‹¬ç«‹ã—ãŸçŠ¶æ…‹ã§å®Ÿè¡Œ
- **ç¶²ç¾…æ€§**: æ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ã®ä¸¡æ–¹ã‚’ã‚«ãƒãƒ¼
- **ä¿å®ˆæ€§**: ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã«ãƒ†ã‚¹ãƒˆã‚‚åŒæ™‚ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

ã“ã®è¦ç´„ã«ã‚ˆã‚Šã€å“è³ªã®é«˜ã„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ç¶™ç¶šçš„ãªå“è³ªä¿è¨¼ã‚’å®Ÿç¾ã™ã‚‹ ğŸ¯

## ğŸ¯ ATDD: Acceptance Test-Driven Development

### ğŸ“‹ ATDDå®Ÿè·µæ–¹é‡
- **Featureãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆ**: ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’Gherkinæ§‹æ–‡ã§å®šç¾©ã—ã€ãã“ã‹ã‚‰ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…
- **å®Œå…¨ãªAPIçµ±åˆ**: ã‚·ãƒŠãƒªã‚ªã§ä½¿ç”¨ã•ã‚Œã‚‹å…¨ã¦ã®APIã‚’å®Ÿéš›ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨çµ±åˆã™ã‚‹
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ**: E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«å¿…ãšãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆ
- **Backgroundã§ãƒ­ã‚°ã‚¤ãƒ³**: å…¨ã¦ã®Featureãƒ•ã‚¡ã‚¤ãƒ«ã§Background: ãƒ¦ãƒ¼ã‚¶ãƒ¼"Daiki"ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚’å¿…é ˆã¨ã™ã‚‹
- **ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰æ¤œè¨¼**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¾ã§ã®å…¨ã¦ã®å±¤ã‚’é€šã—ãŸãƒ†ã‚¹ãƒˆ

### ğŸ”„ ATDDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
1. **ğŸ“ Featureãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ**: ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’Gherkinæ§‹æ–‡ã§è¨˜è¿°
2. **âŒ E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: æœ€åˆã¯å¿…ãšå¤±æ•—ã™ã‚‹ï¼ˆRedï¼‰
3. **âš¡ æœ€å°å®Ÿè£…**: ãƒ†ã‚¹ãƒˆã‚’é€šã™ãŸã‚ã®æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ï¼ˆGreenï¼‰
4. **ğŸ”§ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: ã‚³ãƒ¼ãƒ‰å“è³ªã‚’å‘ä¸Šï¼ˆRefactorï¼‰
5. **âœ… çµ±åˆç¢ºèª**: å…¨ã¦ã®APIãŒé©åˆ‡ã«çµ±åˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

### ğŸ› ï¸ E2Eãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š

#### ğŸ” èªè¨¼å…±é€šã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå¿…é ˆï¼‰
**å…¨ã¦ã®Featureãƒ•ã‚¡ã‚¤ãƒ«ã§ä»¥ä¸‹ã®Backgroundã‚’ä½¿ç”¨ã™ã‚‹**:
```gherkin
Feature: æ©Ÿèƒ½å
  æ©Ÿèƒ½ã®èª¬æ˜

  Background:
    Given ãƒ¦ãƒ¼ã‚¶ãƒ¼"Daiki"ã§ãƒ­ã‚°ã‚¤ãƒ³

  Rule: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«
    Scenario: ã‚·ãƒŠãƒªã‚ªå
      Given ä½•ã‹ã®å‰ææ¡ä»¶
      When ä½•ã‹ã®å‹•ä½œ
      Then ä½•ã‹ã®çµæœ
```

#### ğŸ”§ å…±é€šèªè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè£…
```javascript
// e2e/steps/auth.steps.js
Given('ãƒ¦ãƒ¼ã‚¶ãƒ¼{string}ã§ãƒ­ã‚°ã‚¤ãƒ³', async function (userName) {
  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ - å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚¯ãƒªã‚¢
  await prisma.meetingParticipant.deleteMany();
  await prisma.meeting.deleteMany();
  await prisma.user.deleteMany();
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
  const user = await prisma.user.create({
    data: {
      email: `${userName.toLowerCase()}@example.com`,
      name: userName
    }
  });
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿å­˜ï¼ˆä»–ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ä½¿ç”¨ï¼‰
  this.currentUser = user;
});
```

#### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†
```javascript
After(async function () {
  if (page) {
    await page.close();
    page = null;
  }
  if (browser) {
    await browser.close();
    browser = null;
  }
  await prisma.$disconnect();
});
```

### âš ï¸ ATDDæ³¨æ„ç‚¹
- **Backgroundå¿…é ˆ**: å…¨ã¦ã®Featureãƒ•ã‚¡ã‚¤ãƒ«ã§Background: ãƒ¦ãƒ¼ã‚¶ãƒ¼"Daiki"ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚’è¨˜è¼‰ã™ã‚‹
- **èªè¨¼å‰æ**: å…¨ã¦ã®ã‚·ãƒŠãƒªã‚ªã¯èªè¨¼æ¸ˆã¿çŠ¶æ…‹ã§ã®å‹•ä½œã‚’å‰æã¨ã™ã‚‹
- **å…¨APIçµ±åˆ**: ã‚·ãƒŠãƒªã‚ªã§é–¢é€£ã™ã‚‹å…¨ã¦ã®APIãŒå®Ÿéš›ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨é€£æºã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
- **ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§**: ãƒ†ã‚¹ãƒˆé–“ã§ãƒ‡ãƒ¼ã‚¿ãŒç«¶åˆã—ãªã„ã‚ˆã†ã€å„ãƒ†ã‚¹ãƒˆå‰ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
- **ğŸš« å›ºå®šå¾…æ©Ÿç¦æ­¢**: `waitForTimeout()`ã«ã‚ˆã‚‹å›ºå®šå¾…æ©Ÿã¯åŸºæœ¬ç¦æ­¢
- **âš¡ å‹•çš„å¾…æ©Ÿå¿…é ˆ**: è¦ç´ ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å®Œäº†ã‚’å¾…ã¤å‹•çš„å¾…æ©Ÿã‚’ä½¿ç”¨
- **å‡¦ç†å®Œäº†å¾…æ©Ÿ**: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã€UIæ›´æ–°å®Œäº†ã¾ã§é©åˆ‡ã«å¾…æ©Ÿ
- **ğŸ“Š ãƒ‡ãƒ¼ã‚¿æº–å‚™åˆ†é›¢**: Givenï¼ˆãƒ‡ãƒ¼ã‚¿æº–å‚™ï¼‰ã‚¹ãƒ†ãƒƒãƒ—ã¯`data.steps.js`ã«é›†ç´„

### ğŸš€ E2Eå¾…æ©Ÿæˆ¦ç•¥ãƒ«ãƒ¼ãƒ«

#### âŒ ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// å›ºå®šæ™‚é–“å¾…æ©Ÿï¼ˆç¦æ­¢ï¼‰
await page.waitForTimeout(3000);
await page.waitForTimeout(1000);
```

#### âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å®Œäº†å¾…æ©Ÿ
await page.waitForLoadState('networkidle');

// è¦ç´ è¡¨ç¤ºå¾…æ©Ÿ
await page.waitForSelector('[data-testid="calendar-view"]', { timeout: 10000 });

// ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºå¾…æ©Ÿ
await page.waitForSelector('[role="dialog"]', { timeout: 10000 });

// ç‰¹å®šãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºå¾…æ©Ÿ
await page.waitForSelector(':text("æ›´æ–°ã•ã‚ŒãŸä¼šè­°")', { timeout: 10000 });
```

#### ğŸ¯ å¾…æ©Ÿæˆ¦ç•¥ã®é¸æŠæŒ‡é‡
- **ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å¾Œ**: `waitForLoadState('networkidle')`ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å®Œäº†ã‚’å¾…æ©Ÿ
- **è¦ç´ è¡¨ç¤º**: `waitForSelector()`ã§è¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
- **ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º**: `waitForSelector('[data-testid="form-element"]')`ã§ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã‚’å¾…æ©Ÿ
- **ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º**: `waitForSelector('[role="dialog"]')`ã§ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’å¾…æ©Ÿ
- **ãƒ‡ãƒ¼ã‚¿æ›´æ–°**: `waitForSelector(':text("æ›´æ–°å¾Œã®å†…å®¹")')`ã§æ›´æ–°ã•ã‚ŒãŸå†…å®¹ã‚’å¾…æ©Ÿ

ã“ã®æˆ¦ç•¥ã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã‚’70%çŸ­ç¸®ï¼ˆ40ç§’â†’12ç§’ï¼‰ã—ã€ã‚ˆã‚Šå®‰å®šã—ãŸE2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿç¾ã™ã‚‹ ğŸš€

## ğŸ“Š E2Eã‚¹ãƒ†ãƒƒãƒ—åˆ†é›¢ãƒ«ãƒ¼ãƒ«

### ğŸ¯ åŸºæœ¬åŸå‰‡
- **é–¢å¿ƒã®åˆ†é›¢**: èªè¨¼ãƒ»ãƒ‡ãƒ¼ã‚¿æº–å‚™ãƒ»UIæ“ä½œã‚’ç‹¬ç«‹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†é›¢
- **ç´”ç²‹æ€§**: Givenã‚¹ãƒ†ãƒƒãƒ—ã¯ç´”ç²‹ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã®ã¿å®Ÿè¡Œ
- **å†åˆ©ç”¨æ€§**: å…±é€šã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å…¨featureãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ç”¨å¯èƒ½

### ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨è²¬å‹™

#### ğŸ” `auth.steps.js`
- **è²¬å‹™**: èªè¨¼å‡¦ç†ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶ç®¡ç†ãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†
- **å«ã‚€å†…å®¹**:
  - `Given ãƒ¦ãƒ¼ã‚¶ãƒ¼"Daiki"ã§ãƒ­ã‚°ã‚¤ãƒ³`
  - `BeforeAll`/`AfterAll`ãƒ•ãƒƒã‚¯
  - ã‚°ãƒ­ãƒ¼ãƒãƒ«Page ObjectåˆæœŸåŒ–

#### ğŸ“Š `data.steps.js`
- **è²¬å‹™**: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆï¼ˆç´”ç²‹ãªDBæ“ä½œã®ã¿ï¼‰
- **å«ã‚€å†…å®¹**:
  - `Given ä¼šè­° "ã‚¿ã‚¤ãƒˆãƒ«" ã‚’ä½œæˆæ¸ˆã¿`
  - `Given æ™‚é–“å¸¯ "10:00-11:00" ã®ä¼šè­°ã‚’ä½œæˆæ¸ˆã¿`
  - `Given é‡è¦ä¼šè­° "ã‚¿ã‚¤ãƒˆãƒ«" ã‚’ä½œæˆæ¸ˆã¿`
  - `Given ä¼šè­° "ã‚¿ã‚¤ãƒˆãƒ«" ã«å‚åŠ è€… "email" ã‚’è¿½åŠ æ¸ˆã¿`
- **ç‰¹å¾´**:
  - ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ä¸€åˆ‡ãªã—
  - Prismaã«ã‚ˆã‚‹ç›´æ¥DBæ“ä½œ
  - `this.createdMeeting`ã§ä»–ã‚¹ãƒ†ãƒƒãƒ—ã«å…±æœ‰

#### ğŸ–¥ï¸ `{feature}.steps.js`
- **è²¬å‹™**: UIæ“ä½œãƒ»ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ãƒ»çµæœç¢ºèª
- **å«ã‚€å†…å®¹**:
  - `When` ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆãƒšãƒ¼ã‚¸æ“ä½œï¼‰
  - `Then` ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆçµæœç¢ºèªï¼‰
- **ç‰¹å¾´**:
  - ã‚°ãƒ­ãƒ¼ãƒãƒ«Page Objectä½¿ç”¨
  - å‹•çš„å¾…æ©Ÿæˆ¦ç•¥ã®é©ç”¨

### ğŸš« ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// âŒ data.steps.jså†…ã§ã®ãƒšãƒ¼ã‚¸æ“ä½œï¼ˆç¦æ­¢ï¼‰
Given('ä¼šè­°ã‚’ä½œæˆæ¸ˆã¿', async function () {
  await page.goto('http://localhost:3000'); // NG
  await page.click('button'); // NG
});

// âŒ UIæ“ä½œã‚¹ãƒ†ãƒƒãƒ—å†…ã§ã®ãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆç¦æ­¢ï¼‰
When('ä¼šè­°ã‚’ä½œæˆã™ã‚‹', async function () {
  await prisma.meeting.create({...}); // NG
});
```

### âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// âœ… data.steps.js - ç´”ç²‹ãªDBæ“ä½œ
Given('ä¼šè­° {string} ã‚’ä½œæˆæ¸ˆã¿', async function (title) {
  const meeting = await prisma.meeting.create({
    data: { title, startTime: tomorrow, endTime: endTime, ownerId: this.currentUser.id }
  });
  this.createdMeeting = meeting;
});

// âœ… {feature}.steps.js - UIæ“ä½œ
When('ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã§ä¼šè­°è©³ç´°ã‚’é–‹ã', async function () {
  await global.calendarPage.navigate();
  await global.calendarPage.page.click(':text("ä¼šè­°ã‚¿ã‚¤ãƒˆãƒ«")');
});
```

### ğŸ¯ ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨­è¨ˆæŒ‡é‡
- **æŸ”è»Ÿæ€§**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã§ã•ã¾ã–ã¾ãªãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œ
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: åˆç†çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆæ˜æ—¥14:00-15:00ç­‰ï¼‰
- **çµ„ã¿åˆã‚ã›**: è¤‡æ•°ã®Givenã‚¹ãƒ†ãƒƒãƒ—ã‚’çµ„ã¿åˆã‚ã›ã¦è¤‡é›‘ãªã‚·ãƒŠãƒªã‚ªã‚’æ§‹æˆ
- **å‘½åè¦ç´„**: `Given {ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£} "{ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿}" ã‚’{çŠ¶æ…‹}æ¸ˆã¿`

### ğŸ”„ ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œãƒ•ãƒ­ãƒ¼
```
1. Background: ãƒ¦ãƒ¼ã‚¶ãƒ¼"Daiki"ã§ãƒ­ã‚°ã‚¤ãƒ³ (auth.steps.js)
2. Given: ä¼šè­° "ã‚¿ã‚¤ãƒˆãƒ«" ã‚’ä½œæˆæ¸ˆã¿ (data.steps.js)
3. When: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã§ä¼šè­°è©³ç´°ã‚’é–‹ã ({feature}.steps.js)
4. Then: ä¼šè­°è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ ({feature}.steps.js)
```

ã“ã®æ§‹æˆã«ã‚ˆã‚Šã€ä¿å®ˆæ€§ãƒ»å†åˆ©ç”¨æ€§ãƒ»ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé€Ÿåº¦ã®å…¨ã¦ã‚’å‘ä¸Šã•ã›ã‚‹ ğŸ¯

### ğŸ¯ ATDDã®ä¾¡å€¤
- **ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã®æ¤œè¨¼**: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªã§ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚’ç¢ºèª
- **çµ±åˆå“è³ªä¿è¨¼**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çµ±åˆå‹•ä½œã‚’ä¿è¨¼
- **å›å¸°ãƒ†ã‚¹ãƒˆ**: æ©Ÿèƒ½è¿½åŠ æ™‚ã®æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã‚’æ¤œçŸ¥
- **ä»•æ§˜ã®ç”ŸããŸæ–‡æ›¸**: Featureãƒ•ã‚¡ã‚¤ãƒ«ãŒå¸¸ã«æœ€æ–°ã®ä»•æ§˜æ›¸ã¨ã—ã¦æ©Ÿèƒ½

## ğŸ­ Page Objectãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸ¯ åŸºæœ¬åŸå‰‡
- **DOMæƒ…å ±ã®é›†ç´„**: å„ãƒšãƒ¼ã‚¸ã®DOMæ§‹é€ ã¨ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’1ã¤ã®ã‚¯ãƒ©ã‚¹ã«é›†ç´„
- **ãƒ“ã‚¸ãƒã‚¹æ“ä½œã®æŠ½è±¡åŒ–**: ä½ãƒ¬ãƒ™ãƒ«ãªDOMæ“ä½œã‚’é«˜ãƒ¬ãƒ™ãƒ«ãªãƒ“ã‚¸ãƒã‚¹æ“ä½œã«å¤‰æ›
- **ä¿å®ˆæ€§ã®å‘ä¸Š**: UIå¤‰æ›´æ™‚ã®ä¿®æ­£ç®‡æ‰€ã‚’æœ€å°é™ã«æŠ‘åˆ¶
- **å¯èª­æ€§ã®å‘ä¸Š**: stepå®šç¾©ã‚’ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ä¸­å¿ƒã«ç°¡ç´ åŒ–

### ğŸ—ï¸ Page Objectã‚¯ãƒ©ã‚¹è¨­è¨ˆ

#### ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
e2e/
â”œâ”€â”€ page-objects/
â”‚   â”œâ”€â”€ CalendarPage.js      # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã®Page Object
â”‚   â”œâ”€â”€ MeetingFormPage.js   # ä¼šè­°ãƒ•ã‚©ãƒ¼ãƒ ã®Page Object
â”‚   â””â”€â”€ [PageName]Page.js    # å„ç”»é¢ã®Page Object
â”œâ”€â”€ steps/
â”‚   â”œâ”€â”€ meeting_creation.steps.js  # Page Objectã‚’ä½¿ç”¨ã—ãŸstepå®šç¾©
â”‚   â””â”€â”€ toppage.steps.js           # Page Objectã‚’ä½¿ç”¨ã—ãŸstepå®šç¾©
â””â”€â”€ features/
    â””â”€â”€ *.feature             # Gherkinã‚·ãƒŠãƒªã‚ª
```

#### ğŸ¨ Page Objectã‚¯ãƒ©ã‚¹æ§‹é€ 
```javascript
class MeetingFormPage {
  constructor(page) {
    this.page = page;
    
    // ğŸ¯ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼å®šç¾©ã‚’é›†ç´„
    this.selectors = {
      createMeetingButton: 'text=ä¼šè­°ã‚’ä½œæˆ',
      titleInput: '[data-testid="meeting-title-input"]',
      submitButton: '[data-testid="meeting-submit-button"]',
      errorAlert: '[role="alert"]'
    };
  }

  // ğŸª ãƒ“ã‚¸ãƒã‚¹æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰
  async createMeeting(title, period, importantFlag) {
    await this.openCreateMeetingForm();
    await this.fillTitle(title);
    await this.setPeriod(period);
    await this.setImportantFlag(importantFlag === 'true');
    await this.submitAndWaitForCompletion();
  }

  // ğŸ“ å€‹åˆ¥æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰
  async openCreateMeetingForm() {
    await this.page.click(this.selectors.createMeetingButton);
    await this.page.waitForSelector(this.selectors.titleInput);
  }

  // ğŸš¨ æ¤œè¨¼ãƒ¡ã‚½ãƒƒãƒ‰
  async waitForErrorMessage(expectedErrorMessage) {
    await this.page.waitForSelector(this.selectors.errorAlert, { timeout: 10000 });
    const alertContent = await this.page.textContent(this.selectors.errorAlert);
    if (!alertContent.includes(expectedErrorMessage)) {
      throw new Error(`Expected error message "${expectedErrorMessage}" not found`);
    }
  }
}
```

### ğŸ”„ step definitionå¤‰æ›´

#### **Beforeï¼ˆDOMæ“ä½œãŒæ•£åœ¨ï¼‰:**
```javascript
When('period {string} ã§ä¼šè­°ã‚’ä½œæˆã™ã‚‹', async function (period) {
  // ä¼šè­°ã‚’ä½œæˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  await page.click('text=ä¼šè­°ã‚’ä½œæˆ');
  
  // ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await page.waitForSelector('[data-testid="meeting-title-input"]');
  
  // ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ï¼ˆå¿…é ˆé …ç›®ã®ãŸã‚ï¼‰
  await page.fill('[data-testid="meeting-title-input"]', 'ãƒ†ã‚¹ãƒˆä¼šè­°');
  
  // é–‹å§‹æ™‚åˆ»ã¨çµ‚äº†æ™‚åˆ»ã‚’è¨­å®šï¼ˆæœŸé–“ã«å¿œã˜ã¦ï¼‰
  const now = new Date();
  const startTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 10, 0);
  const endTime = new Date(startTime);
  
  // æœŸé–“ã®è§£æ
  const periodMatch = period.match(/(\d+)åˆ†/);
  if (periodMatch) {
    const minutes = parseInt(periodMatch[1]);
    endTime.setMinutes(startTime.getMinutes() + minutes);
  }
  
  const startTimeString = startTime.toISOString().slice(0, 16);
  const endTimeString = endTime.toISOString().slice(0, 16);
  
  await page.fill('#startTime', startTimeString);
  await page.fill('#endTime', endTimeString);
  
  // ä½œæˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  await page.click('[data-testid="meeting-submit-button"]');
});
```

#### **Afterï¼ˆPage Objecté›†ç´„ï¼‰:**
```javascript
When('period {string} ã§ä¼šè­°ã‚’ä½œæˆã™ã‚‹', async function (period) {
  // Page Objectã‚’ä½¿ç”¨ã—ãŸæœŸé–“æŒ‡å®šä¼šè­°ä½œæˆ
  await meetingFormPage.createMeetingWithPeriod(period);
});
```

### ğŸ­ Page Objectå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

#### ğŸ¯ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ç®¡ç†
```javascript
class CalendarPage {
  constructor(page) {
    this.page = page;
    
    this.selectors = {
      // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
      calendarView: '[data-testid="calendar-view"]',
      createMeetingButton: 'text=ä¼šè­°ã‚’ä½œæˆ',
      
      // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¦ç´ 
      monthHeader: '.text-2xl.font-semibold',
      dateCells: '.min-h-24.p-2.cursor-pointer',
      
      // ä¼šè­°è¦ç´ 
      meetingItems: '.text-xs.p-1.rounded.truncate',
      importantMeetings: '.bg-destructive.text-destructive-foreground'
    };
  }
}
```

#### âš¡ æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰åˆ†é¡
**åŸºæœ¬æ“ä½œ**: `click()`, `fill()`, `navigate()`
```javascript
async clickCreateMeeting() {
  await this.page.click(this.selectors.createMeetingButton);
}

async navigate(url = 'http://localhost:3000') {
  await this.page.goto(url);
}
```

**è¤‡åˆæ“ä½œ**: è¤‡æ•°ã®åŸºæœ¬æ“ä½œã‚’çµ„ã¿åˆã‚ã›ãŸãƒ“ã‚¸ãƒã‚¹æ“ä½œ
```javascript
async createMeeting(title, period, importantFlag) {
  await this.openCreateMeetingForm();
  await this.fillTitle(title);
  await this.setPeriod(period);
  await this.setImportantFlag(importantFlag === 'true');
  await this.submitAndWaitForCompletion();
}
```

**æ¤œè¨¼æ“ä½œ**: çŠ¶æ…‹ç¢ºèªãƒ»å¾…æ©Ÿãƒ»ã‚¨ãƒ©ãƒ¼æ¤œè¨¼
```javascript
async waitForSuccessMessage() {
  await this.page.waitForSelector(this.selectors.successToast, { timeout: 10000 });
}

async waitForErrorMessage(expectedErrorMessage) {
  await this.page.waitForSelector(this.selectors.errorAlert, { timeout: 10000 });
  const alertContent = await this.page.textContent(this.selectors.errorAlert);
  if (!alertContent.includes(expectedErrorMessage)) {
    throw new Error(`Expected error message "${expectedErrorMessage}" not found`);
  }
}
```

### ğŸš€ Page Objectå°å…¥åŠ¹æœ

#### **1. ä¿å®ˆæ€§å‘ä¸Š** ğŸ› ï¸
- **UIå¤‰æ›´å¯¾å¿œ**: ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼å¤‰æ›´æ™‚ã®ä¿®æ­£ç®‡æ‰€ãŒ1ãƒ•ã‚¡ã‚¤ãƒ«ã«é›†ç´„
- **å½±éŸ¿ç¯„å›²æ˜ç¢ºåŒ–**: DOMæ§‹é€ å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒç‰¹å®šã—ã‚„ã™ã„
- **ä¸€å…ƒç®¡ç†**: ç”»é¢å›ºæœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒ1ç®‡æ‰€ã«é›†ç´„

#### **2. å¯èª­æ€§å‘ä¸Š** ğŸ“–
- **ãƒ“ã‚¸ãƒã‚¹ä¸­å¿ƒ**: stepå®šç¾©ãŒãƒ“ã‚¸ãƒã‚¹æ“ä½œä¸­å¿ƒã«ãªã‚Šç†è§£ã—ã‚„ã™ã„
- **æŠ½è±¡åŒ–**: æŠ€è¡“çš„è©³ç´°ãŒéš è”½ã•ã‚Œã¦ã‚·ãƒŠãƒªã‚ªãŒèª­ã¿ã‚„ã™ã„
- **æ„å›³æ˜ç¢º**: ãƒ¡ã‚½ãƒƒãƒ‰åã§ãƒ“ã‚¸ãƒã‚¹æ„å›³ãŒæ˜ç¢ºã«è¡¨ç¾

#### **3. å†åˆ©ç”¨æ€§å‘ä¸Š** â™»ï¸
- **å…±é€šæ“ä½œ**: ç”»é¢å›ºæœ‰ã®æ“ä½œã‚’ä»–ã®ã‚·ãƒŠãƒªã‚ªã§ç°¡å˜ã«å†åˆ©ç”¨
- **æ¨™æº–åŒ–**: åŒã˜æ“ä½œãŒå¸¸ã«åŒã˜æ–¹æ³•ã§å®Ÿè¡Œã•ã‚Œã‚‹
- **DRYåŸå‰‡**: é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å‰Šæ¸›

#### **4. ãƒ†ã‚¹ãƒˆå®‰å®šæ€§å‘ä¸Š** ğŸ›¡ï¸
- **å¾…æ©Ÿå‡¦ç†çµ±ä¸€**: Page Objectå†…ã§é©åˆ‡ãªå¾…æ©Ÿå‡¦ç†ã‚’å®Ÿè£…
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼å“è³ª**: data-testidç­‰ã®æ¨å¥¨ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’é›†ç´„ç®¡ç†

### ğŸ“‹ Page Objectå®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

#### âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- **1ç”»é¢1ã‚¯ãƒ©ã‚¹**: å„ç”»é¢ã«å¯¾å¿œã™ã‚‹å°‚ç”¨Page Objectã‚¯ãƒ©ã‚¹ã‚’ä½œæˆ
- **ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼é›†ç´„**: å…¨ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§å®šç¾©
- **ãƒ“ã‚¸ãƒã‚¹æ“ä½œ**: é«˜ãƒ¬ãƒ™ãƒ«ãªãƒ“ã‚¸ãƒã‚¹æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›
- **é©åˆ‡ãªå¾…æ©Ÿ**: éåŒæœŸå‡¦ç†ã«å¯¾ã™ã‚‹é©åˆ‡ãªå¾…æ©Ÿå‡¦ç†

#### âŒ ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³
- **å·¨å¤§ã‚¯ãƒ©ã‚¹**: è¤‡æ•°ç”»é¢ã®æ“ä½œã‚’1ã¤ã®ã‚¯ãƒ©ã‚¹ã«æ··åœ¨
- **DOMæ“ä½œéœ²å‡º**: stepå®šç¾©ã«ç›´æ¥çš„ãªDOMæ“ä½œãŒæ®‹å­˜
- **é‡è¤‡å®Ÿè£…**: åŒã˜æ“ä½œã‚’è¤‡æ•°ã®Page Objectã§é‡è¤‡å®Ÿè£…
- **ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æ•£åœ¨**: ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒãƒ¡ã‚½ãƒƒãƒ‰å†…ã«æ•£åœ¨

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€E2Eãƒ†ã‚¹ãƒˆã®ä¿å®ˆæ€§ãƒ»å¯èª­æ€§ãƒ»å†åˆ©ç”¨æ€§ãŒå¤§å¹…ã«å‘ä¸Šã—ã€ãƒãƒ¼ãƒ é–‹ç™ºã§ã®å“è³ªãŒç¢ºä¿ã•ã‚Œã‚‹ ğŸ‰

# ğŸ¨ Frontendã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ«ãƒ¼ãƒ«

## ğŸª Custom Hooks Pattern

### ğŸ¯ åŸºæœ¬åŸå‰‡
- **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: å„ãƒ•ãƒƒã‚¯ã¯1ã¤ã®è²¬å‹™ã®ã¿ã‚’æ‹…å½“
- **è²¬å‹™ã®åˆ†é›¢**: ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»æ“ä½œãƒ»UIçŠ¶æ…‹ãƒ»å‰¯ä½œç”¨ã‚’ç‹¬ç«‹ã—ãŸãƒ•ãƒƒã‚¯ã«åˆ†é›¢
- **å†åˆ©ç”¨æ€§**: ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚åˆ©ç”¨å¯èƒ½ãªè¨­è¨ˆ
- **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½

### ğŸ—ï¸ ãƒ•ãƒƒã‚¯åˆ†é¡ã¨è²¬å‹™

#### ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ•ãƒƒã‚¯ (`use{Entity}s.ts`)
- **è²¬å‹™**: APIã¨ã®é€šä¿¡ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **å‘½åä¾‹**: `useMeetings`, `useUsers`, `useProjects`
- **æˆ»ã‚Šå€¤**: ãƒ‡ãƒ¼ã‚¿ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã€ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã€å†å–å¾—é–¢æ•°

```typescript
// ä¾‹: useMeetings.ts
export const useMeetings = () => {
  const [meetings, setMeetings] = useState<Meeting[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  const loadMeetings = async () => { /* APIé€šä¿¡ */ };
  const updateMeetings = (updater: (prev: Meeting[]) => Meeting[]) => { /* çŠ¶æ…‹æ›´æ–° */ };
  
  return { meetings, isLoading, error, loadMeetings, updateMeetings };
};
```

#### âš™ï¸ æ“ä½œãƒ•ãƒƒã‚¯ (`use{Entity}Actions.ts`)
- **è²¬å‹™**: CRUDæ“ä½œã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€APIå‘¼ã³å‡ºã—ã€æ¥½è¦³çš„æ›´æ–°
- **å‘½åä¾‹**: `useMeetingActions`, `useUserActions`
- **æˆ»ã‚Šå€¤**: æ“ä½œé–¢æ•°ç¾¤ï¼ˆä½œæˆã€æ›´æ–°ã€å‰Šé™¤ãªã©ï¼‰

```typescript
// ä¾‹: useMeetingActions.ts
export const useMeetingActions = ({ meetings, updateMeetings, loadMeetings, ... }) => {
  const handleMeetingSubmit = async (data) => { /* ä½œæˆãƒ»æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯ */ };
  const handleMeetingDelete = (id) => { /* å‰Šé™¤ãƒ­ã‚¸ãƒƒã‚¯ */ };
  
  return { handleMeetingSubmit, handleMeetingDelete };
};
```

#### ğŸ–¥ï¸ UIçŠ¶æ…‹ãƒ•ãƒƒã‚¯ (`use{Feature}Modals.ts` / `use{Feature}UI.ts`)
- **è²¬å‹™**: ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º/éè¡¨ç¤ºã€é¸æŠçŠ¶æ…‹ã€ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ã€UIåˆ¶å¾¡
- **å‘½åä¾‹**: `useMeetingModals`, `useFormState`, `useNavigation`
- **æˆ»ã‚Šå€¤**: UIçŠ¶æ…‹ã€çŠ¶æ…‹å¤‰æ›´é–¢æ•°ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼

```typescript
// ä¾‹: useMeetingModals.ts
export const useMeetingModals = () => {
  const [showForm, setShowForm] = useState(false);
  const [selectedItem, setSelectedItem] = useState(null);
  
  const handleOpen = () => setShowForm(true);
  const handleClose = () => { setShowForm(false); setSelectedItem(null); };
  
  return { showForm, selectedItem, handleOpen, handleClose };
};
```

#### ğŸ”” å‰¯ä½œç”¨ãƒ•ãƒƒã‚¯ (`use{Service}.ts`)
- **è²¬å‹™**: ã‚¿ã‚¤ãƒãƒ¼ã€é€šçŸ¥ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºã€å‰¯ä½œç”¨ç®¡ç†
- **å‘½åä¾‹**: `useReminderService`, `useNotificationService`, `useWebSocket`
- **æˆ»ã‚Šå€¤**: é€šå¸¸ã¯`null`ï¼ˆå‰¯ä½œç”¨ã®ã¿ã‚’ç®¡ç†ï¼‰

```typescript
// ä¾‹: useReminderService.ts
export const useReminderService = ({ meetings }) => {
  useEffect(() => {
    const interval = setInterval(() => { /* ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒã‚§ãƒƒã‚¯ */ }, 60000);
    return () => clearInterval(interval);
  }, [meetings]);
  
  return null; // å‰¯ä½œç”¨ã®ã¿ãªã®ã§æˆ»ã‚Šå€¤ä¸è¦
};
```

### ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ page.tsx              # 80-100è¡Œç¨‹åº¦ï¼ˆãƒ•ãƒƒã‚¯å‘¼ã³å‡ºã—+JSXï¼‰
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ use{Entity}s.ts       # ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â”‚   â”œâ”€â”€ use{Entity}Actions.ts # æ“ä½œãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ use{Feature}Modals.ts # UIçŠ¶æ…‹ç®¡ç†
â”‚   â””â”€â”€ use{Service}.ts       # å‰¯ä½œç”¨ãƒ»ã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ components/
â”‚   â””â”€â”€ {...}                 # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ types/
    â””â”€â”€ {...}                 # å‹å®šç¾©
```

### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ğŸ”„ ä¾å­˜é–¢ä¿‚ç®¡ç†
- **props drillingå›é¿**: å¿…è¦ãªçŠ¶æ…‹ã®ã¿ã‚’é–¢é€£ãƒ•ãƒƒã‚¯ã«æ¸¡ã™
- **å¾ªç’°ä¾å­˜å›é¿**: ãƒ•ãƒƒã‚¯é–“ã®ä¾å­˜é–¢ä¿‚ã‚’æœ€å°é™ã«æŠ‘åˆ¶
- **è¨ˆç®—é‡å‰Šæ¸›**: `useMemo`ã§ãƒ•ãƒƒã‚¯å†…ã®é‡ã„è¨ˆç®—ã‚’ãƒ¡ãƒ¢åŒ–

#### ğŸ¯ æœ€é©åŒ–ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- **ãƒ•ãƒƒã‚¯åˆ†å‰²**: 1ã¤ã®ãƒ•ãƒƒã‚¯ãŒ100è¡Œã‚’è¶…ãˆã‚‹å ´åˆã¯è²¬å‹™ã‚’è¦‹ç›´ã—ã¦åˆ†å‰²
- **çŠ¶æ…‹æœ€å°åŒ–**: å°å‡ºå¯èƒ½ãªçŠ¶æ…‹ã¯`useMemo`ã§è¨ˆç®—ã€stateã«ä¿å­˜ã—ãªã„
- **å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°åˆ¶å¾¡**: é©åˆ‡ãªä¾å­˜é…åˆ—ã§useEffectã®å®Ÿè¡Œã‚’åˆ¶å¾¡

### ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### ğŸ“‹ ãƒ•ãƒƒã‚¯å˜ä½“ãƒ†ã‚¹ãƒˆ
```typescript
// ä¾‹: useMeetings.test.ts
import { renderHook, act } from '@testing-library/react-hooks';
import { useMeetings } from './useMeetings';

test('should load meetings on mount', async () => {
  const { result, waitFor } = renderHook(() => useMeetings());
  
  await waitFor(() => {
    expect(result.current.meetings).toHaveLength(0);
    expect(result.current.isLoading).toBe(false);
  });
});
```

#### ğŸ¯ ãƒ†ã‚¹ãƒˆæŒ‡é‡
- **Pure Logic**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã‚’ç´”ç²‹é–¢æ•°ã¨ã—ã¦æŠ½å‡ºã—ã¦ãƒ†ã‚¹ãƒˆ
- **Mock API**: APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ãƒ¢ãƒƒã‚¯ã—ã¦ãƒ•ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ
- **Integration**: è¤‡æ•°ãƒ•ãƒƒã‚¯ã®é€£æºå‹•ä½œã‚’integration testã§æ¤œè¨¼

### ğŸš¨ æ³¨æ„ç‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### âŒ ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// âŒ è¤‡æ•°è²¬å‹™ã®æ··åœ¨
export const useMeetingEverything = () => {
  // ãƒ‡ãƒ¼ã‚¿å–å¾— + UIçŠ¶æ…‹ + æ“ä½œãƒ­ã‚¸ãƒƒã‚¯ + å‰¯ä½œç”¨ ãŒæ··åœ¨
};

// âŒ éåº¦ãªä¾å­˜é–¢ä¿‚
export const useMeetingActions = () => {
  const modal = useMeetingModals(); // æ“ä½œãƒ•ãƒƒã‚¯ãŒUIçŠ¶æ…‹ã«ä¾å­˜
  const user = useUserData();       // éåº¦ãªä¾å­˜
};
```

#### âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// âœ… å˜ä¸€è²¬å‹™
export const useMeetings = () => { /* ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã®ã¿ */ };
export const useMeetingActions = (props) => { /* å¿…è¦ãªä¾å­˜ã®ã¿propsã§å—ã‘å–ã‚Š */ };

// âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®çµ±åˆ
export default function MeetingPage() {
  const { meetings, loadMeetings, updateMeetings } = useMeetings();
  const modals = useMeetingModals();
  const actions = useMeetingActions({ meetings, updateMeetings, loadMeetings, ...modals });
  
  return <div>{/* ã‚¯ãƒªãƒ¼ãƒ³ãªJSX */}</div>;
}
```

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¯èª­æ€§ãƒ»ä¿å®ˆæ€§ãƒ»ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ãŒå¤§å¹…ã«å‘ä¸Šã—ã€ãƒãƒ¼ãƒ é–‹ç™ºã§ã®å“è³ªãŒç¢ºä¿ã•ã‚Œã‚‹ ğŸ¯
