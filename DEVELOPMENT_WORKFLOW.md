# 開発ワークフロー

## BDD駆動開発とFigma Make連携ワークフロー

このプロジェクトでは、ビジネス要件をGherkin仕様で定義し、Figma Makeを活用してUIを作成、Next.jsに統合する開発手法を採用している。

### ワークフローの4段階

**1. ガーキンで仕様を表現**
- ビジネス要件をGherkin構文で`features/`ディレクトリに記述
- `Feature` → `Rule` → `Scenario`の階層で整理
- ビジネスルールのみを記載し、UIの詳細は含めない
- 実装前に仕様レビューを実施してビジネス価値を確認

**2. Figma MakeにGherkinを入力してUIを作成**
- 作成したGherkin仕様をFigma Makeにプロンプトとして入力
- 「このGherkin仕様に基づいてUIを作成してください」として依頼
- Figma Makeが仕様を理解してUI設計とコンポーネントを自動生成
- 必要に応じてUI調整や追加要件を指示

**3. Figma Makeで作成されたCodeをコピーして設置**
- Figma Makeの「Export Code」機能でReactコンポーネントを出力
- 出力されたコードを`frontend/figma-make-code/`ディレクトリに保存
- 生成されたファイル構造と依存関係を確認
- UIコンポーネントとビジネスロジックの分離を検証

**4. Figma Make CodeをNext.jsに組み込み**
- `frontend/figma-make-code/`のコードをNext.jsプロジェクトに統合
- 「アーキテクチャルール」に従って以下を実行：
  - ファイル配置（types → src/types、ui → src/lib/ui、components → src/components）
  - importパス修正（相対パス調整、バージョン指定削除）
  - Next.js対応（'use client'追加、App Router形式変換）
  - 依存関係インストール（必須パッケージ追加）
  - CSS設定更新（shadcn/ui互換変数追加）

### ワークフロー実行時の注意点

**仕様作成フェーズ：**
- ビジネスルールとUIルールを明確に分離
- 実装詳細ではなく、ビジネス価値に焦点を当てる
- ステークホルダーとの合意形成を重視

**UI作成フェーズ：**
- Gherkin仕様をそのままFigma Makeに入力
- 生成されたUIがビジネス要件を満たしているか検証
- 必要に応じてUIの微調整を依頼

**コード統合フェーズ：**
- 既存のコード規約とアーキテクチャに準拠
- バリデーション・エラーハンドリングの実装確認
- テスト実行とビルド確認

**品質保証：**
- 実装後にGherkin仕様との整合性を確認
- UIルールとビジネスルールの適切な分離を維持
- 統合テストでエンドツーエンドの動作を検証

このワークフローにより、ビジネス要件の明確化からUI実装まで一貫性のある開発プロセスを実現できる。