Feature: 入力データバリデーション
  入力データの品質を保証し、システムの整合性を維持したい

  Rule: メールアドレス形式検証
    参加者のメールアドレスは有効な形式である必要がある
    不正な形式のメールアドレスは拒否される

    @pending
    Scenario: 有効なメールアドレス形式で参加者を追加
      Given オーナーが参加者追加画面を開いている
      When "user@example.com" を入力して参加者を追加する
      Then 参加者が正常に追加される
      And 参加者の名前が "user" として自動設定される

    @pending
    Scenario: 無効なメールアドレス形式で参加者追加を試行
      Given オーナーが参加者追加画面を開いている
      When "invalid-email" を入力して参加者を追加する
      Then "有効なメールアドレスを入力してください" エラーが表示される
      And 参加者は追加されない

    @pending
    Scenario: 空のメールアドレスで参加者追加を試行
      Given オーナーが参加者追加画面を開いている
      When 空文字列を入力して参加者を追加する
      Then エラーメッセージが表示される
      And 参加者は追加されない

  Rule: 重複参加者の防止
    同一メールアドレスの参加者は重複して追加できない
    オーナー自身を参加者として追加することはできない

    @pending
    Scenario: 既存参加者と同じメールアドレスで追加を試行
      Given 会議に "user@example.com" が既に参加している
      When オーナーが再度 "user@example.com" を追加しようとする
      Then "この参加者は既に追加されています" エラーが表示される
      And 参加者は重複して追加されない

    @pending
    Scenario: オーナー自身を参加者として追加を試行
      Given オーナーが "owner@example.com" でログインしている
      When オーナーが "owner@example.com" を参加者として追加しようとする
      Then "この参加者は既に追加されています" エラーが表示される
      And オーナーは参加者リストに追加されない

  Rule: 新規参加者のデフォルト設定
    新しく追加された参加者には適切なデフォルト値が設定される
    名前はメールアドレスから自動生成される

    @pending
    Scenario: 新規参加者のデフォルト通知設定
      Given オーナーが新しい参加者を追加する
      When 参加者が正常に追加される
      Then その参加者のメール通知が有効になっている
      And その参加者のプッシュ通知が無効になっている

    @pending
    Scenario: メールアドレスからの名前自動生成
      Given オーナーが "john.doe@company.com" を参加者として追加する
      When 参加者が正常に追加される
      Then その参加者の名前が "john.doe" として設定される