Feature: 割引の提供
  オンラインカレンダーでトレーニングコースを販売する営業担当として顧客に割引を提供したい
  そうすることで顧客ができるだけ早く購入してくれるようにしたい

  Rule: カウントダウン割引
    開始日の前日までに購入した場合 10% 割引を適用する
    当日購入の場合は割引を適用しない

    @pending
    Scenario: 前日に購入した場合にカウントダウン割引が適用される
      Given トレーニングコースの開始日が "2025-05-10" である
      And 顧客が "2025-05-09" にそのコースを購入した
      When カウントダウン割引を計算する
      Then 割引率は "10%" である
      And 価格は元値から 10% 減額される

    @pending
    Scenario: 当日に購入した場合はカウントダウン割引が適用されない
      Given トレーニングコースの開始日が "2025-05-10" である
      And 顧客が "2025-05-10" にそのコースを購入した
      When カウントダウン割引を計算する
      Then 割引率は "0%" である
      And 価格は元値のままである

  Rule: スーパーアーリーバード割引
    開始日の 60 日以上前に購入した場合 30% 割引を適用する

    @pending
    Scenario: 60日以上前に購入した場合にスーパーアーリーバード割引が適用される
      Given トレーニングコースの開始日が "2025-08-10" である
      And 顧客が "2025-06-01" にそのコースを購入した
      When スーパーアーリーバード割引を計算する
      Then 割引率は "30%" である

    @pending
    Scenario: 60日未満前に購入した場合はスーパーアーリーバード割引が適用されない
      Given トレーニングコースの開始日が "2025-08-10" である
      And 顧客が "2025-07-15" にそのコースを購入した
      When スーパーアーリーバード割引を計算する
      Then 割引率は "0%" である

  Rule: アーリーバード割引
    開始日の 30 日以上前に購入した場合 10% 割引を適用する

    @pending
    Scenario: 30日以上前に購入した場合にアーリーバード割引が適用される
      Given トレーニングコースの開始日が "2025-07-10" である
      And 顧客が "2025-06-05" にそのコースを購入した
      When アーリーバード割引を計算する
      Then 割引率は "10%" である

    @pending
    Scenario: 30日未満前に購入した場合はアーリーバード割引が適用されない
      Given トレーニングコースの開始日が "2025-07-10" である
      And 顧客が "2025-06-20" にそのコースを購入した
      When アーリーバード割引を計算する
      Then 割引率は "0%" である

  Rule: プロモーションウェビナー割引クーポン
    プロモーションウェビナーに参加した顧客には固定クーポン "500USD" を発行する

    @pending
    Scenario: ウェビナー参加者が割引クーポンを使用する
      Given 顧客がプロモーションウェビナーに参加してクーポンコード "WEB500" を受け取っている
      And 顧客がそのクーポンを使用してコースを購入する
      When クーポン割引を適用する
      Then 割引額は "500USD" である

  Rule: まとめ買い割引
    5 席以上を一括購入した場合 15% 割引を適用する

    @pending
    Scenario: 5席まとめて購入した場合にまとめ買い割引が適用される
      Given 顧客が同一コースを "5" 席購入した
      When まとめ買い割引を計算する
      Then 割引率は "15%" である

    @pending
    Scenario: 4席以下の購入ではまとめ買い割引が適用されない
      Given 顧客が同一コースを "4" 席購入した
      When まとめ買い割引を計算する
      Then 割引率は "0%" である 