Feature: 会議編集
  オーナーとして既存の会議を編集したい

  Background:
    Given ユーザー"Daiki"でログイン

  Rule: 会議編集可能項目
    オーナーは title と period を編集できる

    Scenario: オーナーがtitleとperiodを更新し、全画面で正しい時刻が表示される
      Given 時間帯 "10:00-11:00" の会議を作成済み
      When カレンダー画面で会議をクリックする
      Then 会議詳細画面に "10:00 - 11:00" と表示される
      When 編集ボタンをクリックする
      Then 編集フォームの開始時刻に "10:00" が表示される
      And 編集フォームの終了時刻に "11:00" が表示される
      When タイトルを "更新された会議" に変更する
      And 開始時刻を "14:00" に変更する
      And 終了時刻を "15:30" に変更する
      And 更新ボタンをクリックする
      Then カレンダー画面に "更新された会議" が表示される
      When 更新された会議をクリックする
      Then 会議詳細画面に "14:00 - 15:30" と表示される

  Rule: 会議編集権限制限
    会議を編集できるのはオーナーのみである

    Scenario: オーナー以外は会議を更新できない
      Given 他のユーザーが作成した会議がある
      When 参加者が会議を更新しようとする
      Then "オーナーのみが会議を編集できます" エラーが表示される

  Rule: 開始済み会議の編集制限
    開始済みまたは終了済みの会議は編集できない

    Scenario: 開始済みの会議は更新できない
      Given オーナーが作成した開始済みの会議がある
      When オーナーが会議を更新しようとする
      Then "開始済みの会議は編集できません" エラーが表示される